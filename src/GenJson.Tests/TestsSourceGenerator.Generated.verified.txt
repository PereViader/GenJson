[  
#nullable enable
namespace GenJson.Tests
{
    partial class StringClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullablePresent);
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullableNull);
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, this.Present);
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, this.NullablePresent);
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, this.NullableNull);
            }
            span[index++] = '}';
        }

        public static StringClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static StringClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            string? _Present = default;
            string? _NullablePresent = default;
            string? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (_Present is null) return null;
                    return new StringClass()
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out _Present)) return null;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out _NullablePresent)) return null;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out _NullableNull)) return null;
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class IntClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                if (this.NullablePresent is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullablePresent.Value);
                }
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                if (this.NullableNull is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullableNull.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            { if (!this.Present.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
            { throw new System.Exception("Buffer too small (Primitive)"); }
            index += written;
            }
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                if (this.NullablePresent is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!this.NullablePresent.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                if (this.NullableNull is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!this.NullableNull.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
            }
            span[index++] = '}';
        }

        public static IntClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static IntClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            int _Present = default;
            bool _Present_set = false;
            int? _NullablePresent = default;
            int? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (!_Present_set) return null;
                    return new IntClass()
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var _Present_tmp)) return null;
                    _Present = _Present_tmp;
                    _Present_set = true;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullablePresent = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var _NullablePresent_tmp)) return null;
                        _NullablePresent = _NullablePresent_tmp;
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullableNull = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var _NullableNull_tmp)) return null;
                        _NullableNull = _NullableNull_tmp;
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class UIntClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                if (this.NullablePresent is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullablePresent.Value);
                }
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                if (this.NullableNull is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullableNull.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            { if (!this.Present.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
            { throw new System.Exception("Buffer too small (Primitive)"); }
            index += written;
            }
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                if (this.NullablePresent is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!this.NullablePresent.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                if (this.NullableNull is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!this.NullableNull.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
            }
            span[index++] = '}';
        }

        public static UIntClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static UIntClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            uint _Present = default;
            bool _Present_set = false;
            uint? _NullablePresent = default;
            uint? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (!_Present_set) return null;
                    return new UIntClass()
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseUInt(json, ref index, out var _Present_tmp)) return null;
                    _Present = _Present_tmp;
                    _Present_set = true;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullablePresent = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseUInt(json, ref index, out var _NullablePresent_tmp)) return null;
                        _NullablePresent = _NullablePresent_tmp;
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullableNull = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseUInt(json, ref index, out var _NullableNull_tmp)) return null;
                        _NullableNull = _NullableNull_tmp;
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class ULongClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                if (this.NullablePresent is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullablePresent.Value);
                }
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                if (this.NullableNull is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullableNull.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            { if (!this.Present.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
            { throw new System.Exception("Buffer too small (Primitive)"); }
            index += written;
            }
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                if (this.NullablePresent is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!this.NullablePresent.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                if (this.NullableNull is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!this.NullableNull.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
            }
            span[index++] = '}';
        }

        public static ULongClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static ULongClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            ulong _Present = default;
            bool _Present_set = false;
            ulong? _NullablePresent = default;
            ulong? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (!_Present_set) return null;
                    return new ULongClass()
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseULong(json, ref index, out var _Present_tmp)) return null;
                    _Present = _Present_tmp;
                    _Present_set = true;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullablePresent = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseULong(json, ref index, out var _NullablePresent_tmp)) return null;
                        _NullablePresent = _NullablePresent_tmp;
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullableNull = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseULong(json, ref index, out var _NullableNull_tmp)) return null;
                        _NullableNull = _NullableNull_tmp;
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class BoolClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                if (this.NullablePresent is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullablePresent.Value);
                }
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                if (this.NullableNull is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullableNull.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            if (this.Present) { span[index++] = 't'; span[index++] = 'r'; span[index++] = 'u'; span[index++] = 'e'; }
            else { span[index++] = 'f'; span[index++] = 'a'; span[index++] = 'l'; span[index++] = 's'; span[index++] = 'e'; }
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                if (this.NullablePresent is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    if (this.NullablePresent.Value) { span[index++] = 't'; span[index++] = 'r'; span[index++] = 'u'; span[index++] = 'e'; }
                    else { span[index++] = 'f'; span[index++] = 'a'; span[index++] = 'l'; span[index++] = 's'; span[index++] = 'e'; }
                }
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                if (this.NullableNull is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    if (this.NullableNull.Value) { span[index++] = 't'; span[index++] = 'r'; span[index++] = 'u'; span[index++] = 'e'; }
                    else { span[index++] = 'f'; span[index++] = 'a'; span[index++] = 'l'; span[index++] = 's'; span[index++] = 'e'; }
                }
            }
            span[index++] = '}';
        }

        public static BoolClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static BoolClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            bool _Present = default;
            bool _Present_set = false;
            bool? _NullablePresent = default;
            bool? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (!_Present_set) return null;
                    return new BoolClass()
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseBoolean(json, ref index, out var _Present_val)) return null;
                    _Present = _Present_val;
                    _Present_set = true;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullablePresent = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseBoolean(json, ref index, out var _NullablePresent_val)) return null;
                        _NullablePresent = _NullablePresent_val;
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullableNull = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseBoolean(json, ref index, out var _NullableNull_val)) return null;
                        _NullableNull = _NullableNull_val;
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class CharClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                if (this.NullablePresent is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullablePresent.Value);
                }
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                if (this.NullableNull is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullableNull.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            span[index++] = '"';
            span[index++] = this.Present;
            span[index++] = '"';
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                if (this.NullablePresent is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    span[index++] = '"';
                    span[index++] = this.NullablePresent.Value;
                    span[index++] = '"';
                }
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                if (this.NullableNull is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    span[index++] = '"';
                    span[index++] = this.NullableNull.Value;
                    span[index++] = '"';
                }
            }
            span[index++] = '}';
        }

        public static CharClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static CharClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            char _Present = default;
            bool _Present_set = false;
            char? _NullablePresent = default;
            char? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (!_Present_set) return null;
                    return new CharClass()
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseChar(json, ref index, out var _Present_val)) return null;
                    _Present = _Present_val;
                    _Present_set = true;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullablePresent = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseChar(json, ref index, out var _NullablePresent_val)) return null;
                        _NullablePresent = _NullablePresent_val;
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullableNull = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseChar(json, ref index, out var _NullableNull_val)) return null;
                        _NullableNull = _NullableNull_val;
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class FloatClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                if (this.NullablePresent is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullablePresent.Value);
                }
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                if (this.NullableNull is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullableNull.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            {
                if (!this.Present.TryFormat(span.Slice(index), out int written, "R", System.Globalization.CultureInfo.InvariantCulture))                { throw new System.Exception("Buffer too small (FloatingPoint)"); }
                index += written;
            }
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                if (this.NullablePresent is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    {
                        if (!this.NullablePresent.Value.TryFormat(span.Slice(index), out int written, "R", System.Globalization.CultureInfo.InvariantCulture))                        { throw new System.Exception("Buffer too small (FloatingPoint)"); }
                        index += written;
                    }
                }
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                if (this.NullableNull is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    {
                        if (!this.NullableNull.Value.TryFormat(span.Slice(index), out int written, "R", System.Globalization.CultureInfo.InvariantCulture))                        { throw new System.Exception("Buffer too small (FloatingPoint)"); }
                        index += written;
                    }
                }
            }
            span[index++] = '}';
        }

        public static FloatClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static FloatClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            float _Present = default;
            bool _Present_set = false;
            float? _NullablePresent = default;
            float? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (!_Present_set) return null;
                    return new FloatClass()
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseFloat(json, ref index, out var _Present_val)) return null;
                    _Present = _Present_val;
                    _Present_set = true;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullablePresent = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseFloat(json, ref index, out var _NullablePresent_val)) return null;
                        _NullablePresent = _NullablePresent_val;
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullableNull = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseFloat(json, ref index, out var _NullableNull_val)) return null;
                        _NullableNull = _NullableNull_val;
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class DoubleClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                if (this.NullablePresent is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullablePresent.Value);
                }
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                if (this.NullableNull is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullableNull.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            {
                if (!this.Present.TryFormat(span.Slice(index), out int written, "R", System.Globalization.CultureInfo.InvariantCulture))                { throw new System.Exception("Buffer too small (FloatingPoint)"); }
                index += written;
            }
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                if (this.NullablePresent is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    {
                        if (!this.NullablePresent.Value.TryFormat(span.Slice(index), out int written, "R", System.Globalization.CultureInfo.InvariantCulture))                        { throw new System.Exception("Buffer too small (FloatingPoint)"); }
                        index += written;
                    }
                }
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                if (this.NullableNull is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    {
                        if (!this.NullableNull.Value.TryFormat(span.Slice(index), out int written, "R", System.Globalization.CultureInfo.InvariantCulture))                        { throw new System.Exception("Buffer too small (FloatingPoint)"); }
                        index += written;
                    }
                }
            }
            span[index++] = '}';
        }

        public static DoubleClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static DoubleClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            double _Present = default;
            bool _Present_set = false;
            double? _NullablePresent = default;
            double? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (!_Present_set) return null;
                    return new DoubleClass()
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseDouble(json, ref index, out var _Present_val)) return null;
                    _Present = _Present_val;
                    _Present_set = true;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullablePresent = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseDouble(json, ref index, out var _NullablePresent_val)) return null;
                        _NullablePresent = _NullablePresent_val;
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullableNull = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseDouble(json, ref index, out var _NullableNull_val)) return null;
                        _NullableNull = _NullableNull_val;
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class DecimalClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                if (this.NullablePresent is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullablePresent.Value);
                }
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                if (this.NullableNull is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullableNull.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            {
                if (!this.Present.TryFormat(span.Slice(index), out int written, "G", System.Globalization.CultureInfo.InvariantCulture))                { throw new System.Exception("Buffer too small (FloatingPoint)"); }
                index += written;
            }
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                if (this.NullablePresent is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    {
                        if (!this.NullablePresent.Value.TryFormat(span.Slice(index), out int written, "G", System.Globalization.CultureInfo.InvariantCulture))                        { throw new System.Exception("Buffer too small (FloatingPoint)"); }
                        index += written;
                    }
                }
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                if (this.NullableNull is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    {
                        if (!this.NullableNull.Value.TryFormat(span.Slice(index), out int written, "G", System.Globalization.CultureInfo.InvariantCulture))                        { throw new System.Exception("Buffer too small (FloatingPoint)"); }
                        index += written;
                    }
                }
            }
            span[index++] = '}';
        }

        public static DecimalClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static DecimalClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            decimal _Present = default;
            bool _Present_set = false;
            decimal? _NullablePresent = default;
            decimal? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (!_Present_set) return null;
                    return new DecimalClass()
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseDecimal(json, ref index, out var _Present_val)) return null;
                    _Present = _Present_val;
                    _Present_set = true;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullablePresent = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseDecimal(json, ref index, out var _NullablePresent_val)) return null;
                        _NullablePresent = _NullablePresent_val;
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullableNull = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseDecimal(json, ref index, out var _NullableNull_val)) return null;
                        _NullableNull = _NullableNull_val;
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class DateTimeClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                if (this.NullablePresent is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullablePresent.Value);
                }
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                if (this.NullableNull is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullableNull.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            {
                span[index++] = '"';
                if (!this.Present.TryFormat(span.Slice(index), out int written, "O", System.Globalization.CultureInfo.InvariantCulture))                { throw new System.Exception("Buffer too small (Formatted)"); }
                index += written;
                span[index++] = '"';
            }
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                if (this.NullablePresent is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    {
                        span[index++] = '"';
                        if (!this.NullablePresent.Value.TryFormat(span.Slice(index), out int written, "O", System.Globalization.CultureInfo.InvariantCulture))                        { throw new System.Exception("Buffer too small (Formatted)"); }
                        index += written;
                        span[index++] = '"';
                    }
                }
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                if (this.NullableNull is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    {
                        span[index++] = '"';
                        if (!this.NullableNull.Value.TryFormat(span.Slice(index), out int written, "O", System.Globalization.CultureInfo.InvariantCulture))                        { throw new System.Exception("Buffer too small (Formatted)"); }
                        index += written;
                        span[index++] = '"';
                    }
                }
            }
            span[index++] = '}';
        }

        public static DateTimeClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static DateTimeClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            global::System.DateTime _Present = default;
            bool _Present_set = false;
            global::System.DateTime? _NullablePresent = default;
            global::System.DateTime? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (!_Present_set) return null;
                    return new DateTimeClass()
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var _Present_str) || !System.DateTime.TryParse(_Present_str, System.Globalization.CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.RoundtripKind, out var _Present_val)) return null;
                    _Present = _Present_val;
                    _Present_set = true;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullablePresent = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var _NullablePresent_str) || !System.DateTime.TryParse(_NullablePresent_str, System.Globalization.CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.RoundtripKind, out var _NullablePresent_val)) return null;
                        _NullablePresent = _NullablePresent_val;
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullableNull = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var _NullableNull_str) || !System.DateTime.TryParse(_NullableNull_str, System.Globalization.CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.RoundtripKind, out var _NullableNull_val)) return null;
                        _NullableNull = _NullableNull_val;
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class ByteClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                if (this.NullablePresent is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullablePresent.Value);
                }
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                if (this.NullableNull is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullableNull.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            { if (!this.Present.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
            { throw new System.Exception("Buffer too small (Primitive)"); }
            index += written;
            }
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                if (this.NullablePresent is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!this.NullablePresent.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                if (this.NullableNull is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!this.NullableNull.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
            }
            span[index++] = '}';
        }

        public static ByteClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static ByteClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            byte _Present = default;
            bool _Present_set = false;
            byte? _NullablePresent = default;
            byte? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (!_Present_set) return null;
                    return new ByteClass()
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseByte(json, ref index, out var _Present_tmp)) return null;
                    _Present = _Present_tmp;
                    _Present_set = true;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullablePresent = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseByte(json, ref index, out var _NullablePresent_tmp)) return null;
                        _NullablePresent = _NullablePresent_tmp;
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullableNull = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseByte(json, ref index, out var _NullableNull_tmp)) return null;
                        _NullableNull = _NullableNull_tmp;
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class SByteClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                if (this.NullablePresent is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullablePresent.Value);
                }
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                if (this.NullableNull is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullableNull.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            { if (!this.Present.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
            { throw new System.Exception("Buffer too small (Primitive)"); }
            index += written;
            }
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                if (this.NullablePresent is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!this.NullablePresent.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                if (this.NullableNull is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!this.NullableNull.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
            }
            span[index++] = '}';
        }

        public static SByteClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static SByteClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            sbyte _Present = default;
            bool _Present_set = false;
            sbyte? _NullablePresent = default;
            sbyte? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (!_Present_set) return null;
                    return new SByteClass()
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseSByte(json, ref index, out var _Present_tmp)) return null;
                    _Present = _Present_tmp;
                    _Present_set = true;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullablePresent = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseSByte(json, ref index, out var _NullablePresent_tmp)) return null;
                        _NullablePresent = _NullablePresent_tmp;
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullableNull = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseSByte(json, ref index, out var _NullableNull_tmp)) return null;
                        _NullableNull = _NullableNull_tmp;
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class ShortClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                if (this.NullablePresent is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullablePresent.Value);
                }
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                if (this.NullableNull is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullableNull.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            { if (!this.Present.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
            { throw new System.Exception("Buffer too small (Primitive)"); }
            index += written;
            }
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                if (this.NullablePresent is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!this.NullablePresent.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                if (this.NullableNull is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!this.NullableNull.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
            }
            span[index++] = '}';
        }

        public static ShortClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static ShortClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            short _Present = default;
            bool _Present_set = false;
            short? _NullablePresent = default;
            short? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (!_Present_set) return null;
                    return new ShortClass()
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseShort(json, ref index, out var _Present_tmp)) return null;
                    _Present = _Present_tmp;
                    _Present_set = true;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullablePresent = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseShort(json, ref index, out var _NullablePresent_tmp)) return null;
                        _NullablePresent = _NullablePresent_tmp;
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullableNull = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseShort(json, ref index, out var _NullableNull_tmp)) return null;
                        _NullableNull = _NullableNull_tmp;
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class UShortClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                if (this.NullablePresent is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullablePresent.Value);
                }
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                if (this.NullableNull is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullableNull.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            { if (!this.Present.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
            { throw new System.Exception("Buffer too small (Primitive)"); }
            index += written;
            }
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                if (this.NullablePresent is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!this.NullablePresent.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                if (this.NullableNull is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!this.NullableNull.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
            }
            span[index++] = '}';
        }

        public static UShortClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static UShortClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            ushort _Present = default;
            bool _Present_set = false;
            ushort? _NullablePresent = default;
            ushort? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (!_Present_set) return null;
                    return new UShortClass()
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseUShort(json, ref index, out var _Present_tmp)) return null;
                    _Present = _Present_tmp;
                    _Present_set = true;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullablePresent = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseUShort(json, ref index, out var _NullablePresent_tmp)) return null;
                        _NullablePresent = _NullablePresent_tmp;
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullableNull = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseUShort(json, ref index, out var _NullableNull_tmp)) return null;
                        _NullableNull = _NullableNull_tmp;
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class DateTimeOffsetClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                if (this.NullablePresent is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullablePresent.Value);
                }
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                if (this.NullableNull is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullableNull.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            {
                span[index++] = '"';
                if (!this.Present.TryFormat(span.Slice(index), out int written, "O", System.Globalization.CultureInfo.InvariantCulture))                { throw new System.Exception("Buffer too small (Formatted)"); }
                index += written;
                span[index++] = '"';
            }
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                if (this.NullablePresent is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    {
                        span[index++] = '"';
                        if (!this.NullablePresent.Value.TryFormat(span.Slice(index), out int written, "O", System.Globalization.CultureInfo.InvariantCulture))                        { throw new System.Exception("Buffer too small (Formatted)"); }
                        index += written;
                        span[index++] = '"';
                    }
                }
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                if (this.NullableNull is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    {
                        span[index++] = '"';
                        if (!this.NullableNull.Value.TryFormat(span.Slice(index), out int written, "O", System.Globalization.CultureInfo.InvariantCulture))                        { throw new System.Exception("Buffer too small (Formatted)"); }
                        index += written;
                        span[index++] = '"';
                    }
                }
            }
            span[index++] = '}';
        }

        public static DateTimeOffsetClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static DateTimeOffsetClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            global::System.DateTimeOffset _Present = default;
            bool _Present_set = false;
            global::System.DateTimeOffset? _NullablePresent = default;
            global::System.DateTimeOffset? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (!_Present_set) return null;
                    return new DateTimeOffsetClass()
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var _Present_str) || !System.DateTimeOffset.TryParse(_Present_str, System.Globalization.CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.None, out var _Present_val)) return null;
                    _Present = _Present_val;
                    _Present_set = true;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullablePresent = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var _NullablePresent_str) || !System.DateTimeOffset.TryParse(_NullablePresent_str, System.Globalization.CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.None, out var _NullablePresent_val)) return null;
                        _NullablePresent = _NullablePresent_val;
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullableNull = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var _NullableNull_str) || !System.DateTimeOffset.TryParse(_NullableNull_str, System.Globalization.CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.None, out var _NullableNull_val)) return null;
                        _NullableNull = _NullableNull_val;
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class TimeSpanClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                if (this.NullablePresent is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullablePresent.Value);
                }
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                if (this.NullableNull is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullableNull.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            {
                span[index++] = '"';
                if (!this.Present.TryFormat(span.Slice(index), out int written, "c", System.Globalization.CultureInfo.InvariantCulture))                { throw new System.Exception("Buffer too small (Formatted)"); }
                index += written;
                span[index++] = '"';
            }
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                if (this.NullablePresent is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    {
                        span[index++] = '"';
                        if (!this.NullablePresent.Value.TryFormat(span.Slice(index), out int written, "c", System.Globalization.CultureInfo.InvariantCulture))                        { throw new System.Exception("Buffer too small (Formatted)"); }
                        index += written;
                        span[index++] = '"';
                    }
                }
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                if (this.NullableNull is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    {
                        span[index++] = '"';
                        if (!this.NullableNull.Value.TryFormat(span.Slice(index), out int written, "c", System.Globalization.CultureInfo.InvariantCulture))                        { throw new System.Exception("Buffer too small (Formatted)"); }
                        index += written;
                        span[index++] = '"';
                    }
                }
            }
            span[index++] = '}';
        }

        public static TimeSpanClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static TimeSpanClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            global::System.TimeSpan _Present = default;
            bool _Present_set = false;
            global::System.TimeSpan? _NullablePresent = default;
            global::System.TimeSpan? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (!_Present_set) return null;
                    return new TimeSpanClass()
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var _Present_str) || !System.TimeSpan.TryParse(_Present_str, out var _Present_val)) return null;
                    _Present = _Present_val;
                    _Present_set = true;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullablePresent = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var _NullablePresent_str) || !System.TimeSpan.TryParse(_NullablePresent_str, out var _NullablePresent_val)) return null;
                        _NullablePresent = _NullablePresent_val;
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullableNull = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var _NullableNull_str) || !System.TimeSpan.TryParse(_NullableNull_str, out var _NullableNull_val)) return null;
                        _NullableNull = _NullableNull_val;
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class GuidClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                if (this.NullablePresent is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullablePresent.Value);
                }
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                if (this.NullableNull is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullableNull.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            {
                span[index++] = '"';
                if (!this.Present.TryFormat(span.Slice(index), out int written))                { throw new System.Exception("Buffer too small (Formatted)"); }
                index += written;
                span[index++] = '"';
            }
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                if (this.NullablePresent is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    {
                        span[index++] = '"';
                        if (!this.NullablePresent.Value.TryFormat(span.Slice(index), out int written))                        { throw new System.Exception("Buffer too small (Formatted)"); }
                        index += written;
                        span[index++] = '"';
                    }
                }
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                if (this.NullableNull is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    {
                        span[index++] = '"';
                        if (!this.NullableNull.Value.TryFormat(span.Slice(index), out int written))                        { throw new System.Exception("Buffer too small (Formatted)"); }
                        index += written;
                        span[index++] = '"';
                    }
                }
            }
            span[index++] = '}';
        }

        public static GuidClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static GuidClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            global::System.Guid _Present = default;
            bool _Present_set = false;
            global::System.Guid? _NullablePresent = default;
            global::System.Guid? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (!_Present_set) return null;
                    return new GuidClass()
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var _Present_str) || !System.Guid.TryParse(_Present_str, out var _Present_val)) return null;
                    _Present = _Present_val;
                    _Present_set = true;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullablePresent = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var _NullablePresent_str) || !System.Guid.TryParse(_NullablePresent_str, out var _NullablePresent_val)) return null;
                        _NullablePresent = _NullablePresent_val;
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullableNull = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var _NullableNull_str) || !System.Guid.TryParse(_NullableNull_str, out var _NullableNull_val)) return null;
                        _NullableNull = _NullableNull_val;
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class VersionClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullablePresent);
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullableNull);
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            {
                span[index++] = '"';
                if (!this.Present.TryFormat(span.Slice(index), out int written))                { throw new System.Exception("Buffer too small (Formatted)"); }
                index += written;
                span[index++] = '"';
            }
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                {
                    span[index++] = '"';
                    if (!this.NullablePresent.TryFormat(span.Slice(index), out int written))                    { throw new System.Exception("Buffer too small (Formatted)"); }
                    index += written;
                    span[index++] = '"';
                }
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                {
                    span[index++] = '"';
                    if (!this.NullableNull.TryFormat(span.Slice(index), out int written))                    { throw new System.Exception("Buffer too small (Formatted)"); }
                    index += written;
                    span[index++] = '"';
                }
            }
            span[index++] = '}';
        }

        public static VersionClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static VersionClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            global::System.Version? _Present = default;
            global::System.Version? _NullablePresent = default;
            global::System.Version? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (_Present is null) return null;
                    return new VersionClass()
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var _Present_str) || !System.Version.TryParse(_Present_str, out var _Present_val)) return null;
                    _Present = _Present_val;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var _NullablePresent_str) || !System.Version.TryParse(_NullablePresent_str, out var _NullablePresent_val)) return null;
                    _NullablePresent = _NullablePresent_val;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var _NullableNull_str) || !System.Version.TryParse(_NullableNull_str, out var _NullableNull_val)) return null;
                    _NullableNull = _NullableNull_val;
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class IntEnumClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 16;
            size += global::GenJson.GenJsonSizeHelper.GetSize((int)this.PresentNumber);
            propertyCount++;
            size += 14;
            size += this.PresentText switch
            {
                global::GenJson.Tests.IntEnum.One => 5,
                global::GenJson.Tests.IntEnum.Two => 5,
                _ => global::GenJson.GenJsonSizeHelper.GetSize((int)this.PresentText) + 2,
            };
            propertyCount++;
            size += 24;
            size += global::GenJson.GenJsonSizeHelper.GetSize((int)this.NullablePresentNumber);
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                if (this.NullableNull is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize((int)this.NullableNull.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "PresentNumber");
            span[index++] = ':';
            { if (!((int)this.PresentNumber).TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture)) throw new System.Exception("Buffer too small"); index += written; }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "PresentText");
            span[index++] = ':';
            switch (this.PresentText)
            {
                case global::GenJson.Tests.IntEnum.One:
                    global::GenJson.GenJsonWriter.WriteString(span, ref index, "One");
                    break;
                case global::GenJson.Tests.IntEnum.Two:
                    global::GenJson.GenJsonWriter.WriteString(span, ref index, "Two");
                    break;
                default:
                    span[index++] = '"';
                    if (!((int)this.PresentText).TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small"); }
                    index += written;
                    span[index++] = '"';
                    break;
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresentNumber");
            span[index++] = ':';
            { if (!((int)this.NullablePresentNumber).TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture)) throw new System.Exception("Buffer too small"); index += written; }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                if (this.NullableNull is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!((int)this.NullableNull.Value).TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture)) throw new System.Exception("Buffer too small"); index += written; }
                }
            }
            span[index++] = '}';
        }

        public static IntEnumClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static IntEnumClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            global::GenJson.Tests.IntEnum _PresentNumber = default;
            bool _PresentNumber_set = false;
            global::GenJson.Tests.IntEnum _PresentText = default;
            bool _PresentText_set = false;
            global::GenJson.Tests.IntEnum _NullablePresentNumber = default;
            bool _NullablePresentNumber_set = false;
            global::GenJson.Tests.IntEnum? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (!_PresentNumber_set) return null;
                    if (!_PresentText_set) return null;
                    if (!_NullablePresentNumber_set) return null;
                    return new IntEnumClass()
                    {
                        PresentNumber = _PresentNumber,
                        PresentText = _PresentText,
                        NullablePresentNumber = _NullablePresentNumber,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "PresentNumber"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var _PresentNumber_val)) return null;
                    if (!System.Enum.IsDefined(typeof(global::GenJson.Tests.IntEnum), (global::GenJson.Tests.IntEnum)_PresentNumber_val)) return null;
                    _PresentNumber = (global::GenJson.Tests.IntEnum)_PresentNumber_val;
                    _PresentNumber_set = true;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "PresentText"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var _PresentText_str) || !System.Enum.TryParse<global::GenJson.Tests.IntEnum>(_PresentText_str, out var _PresentText_val)) return null;
                    if (!System.Enum.IsDefined(typeof(global::GenJson.Tests.IntEnum), _PresentText_val)) return null;
                    _PresentText = _PresentText_val;
                    _PresentText_set = true;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresentNumber"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var _NullablePresentNumber_val)) return null;
                    if (!System.Enum.IsDefined(typeof(global::GenJson.Tests.IntEnum), (global::GenJson.Tests.IntEnum)_NullablePresentNumber_val)) return null;
                    _NullablePresentNumber = (global::GenJson.Tests.IntEnum)_NullablePresentNumber_val;
                    _NullablePresentNumber_set = true;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullableNull = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var _NullableNull_val)) return null;
                        if (!System.Enum.IsDefined(typeof(global::GenJson.Tests.IntEnum), (global::GenJson.Tests.IntEnum)_NullableNull_val)) return null;
                        _NullableNull = (global::GenJson.Tests.IntEnum)_NullableNull_val;
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class ByteEnumClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize((byte)this.Present);
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            { if (!((byte)this.Present).TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture)) throw new System.Exception("Buffer too small"); index += written; }
            span[index++] = '}';
        }

        public static ByteEnumClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static ByteEnumClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            global::GenJson.Tests.ByteEnum _Present = default;
            bool _Present_set = false;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (!_Present_set) return null;
                    return new ByteEnumClass()
                    {
                        Present = _Present,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseByte(json, ref index, out var _Present_val)) return null;
                    if (!System.Enum.IsDefined(typeof(global::GenJson.Tests.ByteEnum), (global::GenJson.Tests.ByteEnum)_Present_val)) return null;
                    _Present = (global::GenJson.Tests.ByteEnum)_Present_val;
                    _Present_set = true;
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class EmptyClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            if (this.Value is not null)
            {
                propertyCount++;
                size += 8;
                if (this.Value is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.Value.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            if (this.Value is not null)
            {
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "Value");
                span[index++] = ':';
                if (this.Value is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!this.Value.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
            }
            span[index++] = '}';
        }

        public static EmptyClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static EmptyClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            int? _Value = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    return new EmptyClass()
                    {
                        Value = _Value,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Value"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _Value = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var _Value_tmp)) return null;
                        _Value = _Value_tmp;
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class ParentClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += this.Present.CalculateJsonSize();
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                size += this.NullablePresent.CalculateJsonSize();
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                size += this.NullableNull.CalculateJsonSize();
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            this.Present.WriteJson(span, ref index);
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                this.NullablePresent.WriteJson(span, ref index);
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                this.NullableNull.WriteJson(span, ref index);
            }
            span[index++] = '}';
        }

        public static ParentClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static ParentClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            global::GenJson.Tests.EmptyClass? _Present = default;
            global::GenJson.Tests.EmptyClass? _NullablePresent = default;
            global::GenJson.Tests.EmptyClass? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (_Present is null) return null;
                    return new ParentClass()
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    _Present = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                    if (_Present is null) return null;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    _NullablePresent = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                    if (_NullablePresent is null) return null;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    _NullableNull = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                    if (_NullableNull is null) return null;
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class EnumerableIntClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 20;
            {
                size += 2;
                int count0 = 0;
                foreach (var item0 in this.EnumerablePresent)
                {
                    count0++;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                }
                if (count0 > 1) size += count0 - 1;
            }
            propertyCount++;
            size += 15;
            {
                size += 2;
                int count0 = 0;
                foreach (var item0 in this.ArrayPresent)
                {
                    count0++;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                }
                if (count0 > 1) size += count0 - 1;
            }
            propertyCount++;
            size += 14;
            {
                size += 2;
                int count0 = 0;
                foreach (var item0 in this.ListPresent)
                {
                    count0++;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                }
                if (count0 > 1) size += count0 - 1;
            }
            if (this.NullableEnumerablePresent is not null)
            {
                propertyCount++;
                size += 28;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableEnumerablePresent)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableArrayPresent is not null)
            {
                propertyCount++;
                size += 23;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableArrayPresent)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableListPresent is not null)
            {
                propertyCount++;
                size += 22;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableListPresent)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableEnumerableNull is not null)
            {
                propertyCount++;
                size += 25;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableEnumerableNull)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableArrayNull is not null)
            {
                propertyCount++;
                size += 20;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableArrayNull)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableListNull is not null)
            {
                propertyCount++;
                size += 19;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableListNull)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "EnumerablePresent");
            span[index++] = ':';
            {
                span[index++] = '[';
                bool firstItem0 = true;
                foreach (var item0 in this.EnumerablePresent)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    { if (!item0.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
                span[index++] = ']';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "ArrayPresent");
            span[index++] = ':';
            {
                span[index++] = '[';
                bool firstItem0 = true;
                foreach (var item0 in this.ArrayPresent)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    { if (!item0.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
                span[index++] = ']';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "ListPresent");
            span[index++] = ':';
            {
                span[index++] = '[';
                bool firstItem0 = true;
                foreach (var item0 in this.ListPresent)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    { if (!item0.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
                span[index++] = ']';
            }
            if (this.NullableEnumerablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableEnumerablePresent");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableEnumerablePresent)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        { if (!item0.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                        { throw new System.Exception("Buffer too small (Primitive)"); }
                        index += written;
                        }
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableArrayPresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableArrayPresent");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableArrayPresent)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        { if (!item0.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                        { throw new System.Exception("Buffer too small (Primitive)"); }
                        index += written;
                        }
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableListPresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableListPresent");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableListPresent)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        { if (!item0.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                        { throw new System.Exception("Buffer too small (Primitive)"); }
                        index += written;
                        }
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableEnumerableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableEnumerableNull");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableEnumerableNull)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        { if (!item0.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                        { throw new System.Exception("Buffer too small (Primitive)"); }
                        index += written;
                        }
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableArrayNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableArrayNull");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableArrayNull)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        { if (!item0.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                        { throw new System.Exception("Buffer too small (Primitive)"); }
                        index += written;
                        }
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableListNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableListNull");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableListNull)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        { if (!item0.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                        { throw new System.Exception("Buffer too small (Primitive)"); }
                        index += written;
                        }
                    }
                    span[index++] = ']';
                }
            }
            span[index++] = '}';
        }

        public static EnumerableIntClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static EnumerableIntClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            global::System.Collections.Generic.IEnumerable<int>? _EnumerablePresent = default;
            int[]? _ArrayPresent = default;
            global::System.Collections.Generic.List<int>? _ListPresent = default;
            global::System.Collections.Generic.IEnumerable<int>? _NullableEnumerablePresent = default;
            int[]? _NullableArrayPresent = default;
            global::System.Collections.Generic.List<int>? _NullableListPresent = default;
            global::System.Collections.Generic.IEnumerable<int>? _NullableEnumerableNull = default;
            int[]? _NullableArrayNull = default;
            global::System.Collections.Generic.List<int>? _NullableListNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (_EnumerablePresent is null) return null;
                    if (_ArrayPresent is null) return null;
                    if (_ListPresent is null) return null;
                    return new EnumerableIntClass()
                    {
                        EnumerablePresent = _EnumerablePresent,
                        ArrayPresent = _ArrayPresent,
                        ListPresent = _ListPresent,
                        NullableEnumerablePresent = _NullableEnumerablePresent,
                        NullableArrayPresent = _NullableArrayPresent,
                        NullableListPresent = _NullableListPresent,
                        NullableEnumerableNull = _NullableEnumerableNull,
                        NullableArrayNull = _NullableArrayNull,
                        NullableListNull = _NullableListNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "EnumerablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<int>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _EnumerablePresent = list0;
                                break;
                            }
                            int item0 = default;
                            if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var item0_tmp)) return null;
                            item0 = item0_tmp;
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "ArrayPresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<int>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _ArrayPresent = list0.ToArray();
                                break;
                            }
                            int item0 = default;
                            if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var item0_tmp)) return null;
                            item0 = item0_tmp;
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "ListPresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<int>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _ListPresent = list0;
                                break;
                            }
                            int item0 = default;
                            if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var item0_tmp)) return null;
                            item0 = item0_tmp;
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableEnumerablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<int>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableEnumerablePresent = list0;
                                break;
                            }
                            int item0 = default;
                            if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var item0_tmp)) return null;
                            item0 = item0_tmp;
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableArrayPresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<int>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableArrayPresent = list0.ToArray();
                                break;
                            }
                            int item0 = default;
                            if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var item0_tmp)) return null;
                            item0 = item0_tmp;
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableListPresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<int>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableListPresent = list0;
                                break;
                            }
                            int item0 = default;
                            if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var item0_tmp)) return null;
                            item0 = item0_tmp;
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableEnumerableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<int>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableEnumerableNull = list0;
                                break;
                            }
                            int item0 = default;
                            if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var item0_tmp)) return null;
                            item0 = item0_tmp;
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableArrayNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<int>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableArrayNull = list0.ToArray();
                                break;
                            }
                            int item0 = default;
                            if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var item0_tmp)) return null;
                            item0 = item0_tmp;
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableListNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<int>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableListNull = list0;
                                break;
                            }
                            int item0 = default;
                            if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var item0_tmp)) return null;
                            item0 = item0_tmp;
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class EnumerableStringClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 20;
            {
                size += 2;
                int count0 = 0;
                foreach (var item0 in this.EnumerablePresent)
                {
                    count0++;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                }
                if (count0 > 1) size += count0 - 1;
            }
            propertyCount++;
            size += 15;
            {
                size += 2;
                int count0 = 0;
                foreach (var item0 in this.ArrayPresent)
                {
                    count0++;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                }
                if (count0 > 1) size += count0 - 1;
            }
            propertyCount++;
            size += 14;
            {
                size += 2;
                int count0 = 0;
                foreach (var item0 in this.ListPresent)
                {
                    count0++;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                }
                if (count0 > 1) size += count0 - 1;
            }
            if (this.NullableEnumerablePresent is not null)
            {
                propertyCount++;
                size += 28;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableEnumerablePresent)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableArrayPresent is not null)
            {
                propertyCount++;
                size += 23;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableArrayPresent)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableListPresent is not null)
            {
                propertyCount++;
                size += 22;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableListPresent)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableEnumerableNull is not null)
            {
                propertyCount++;
                size += 25;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableEnumerableNull)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableArrayNull is not null)
            {
                propertyCount++;
                size += 20;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableArrayNull)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableListNull is not null)
            {
                propertyCount++;
                size += 19;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableListNull)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "EnumerablePresent");
            span[index++] = ':';
            {
                span[index++] = '[';
                bool firstItem0 = true;
                foreach (var item0 in this.EnumerablePresent)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    global::GenJson.GenJsonWriter.WriteString(span, ref index, item0);
                }
                span[index++] = ']';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "ArrayPresent");
            span[index++] = ':';
            {
                span[index++] = '[';
                bool firstItem0 = true;
                foreach (var item0 in this.ArrayPresent)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    global::GenJson.GenJsonWriter.WriteString(span, ref index, item0);
                }
                span[index++] = ']';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "ListPresent");
            span[index++] = ':';
            {
                span[index++] = '[';
                bool firstItem0 = true;
                foreach (var item0 in this.ListPresent)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    global::GenJson.GenJsonWriter.WriteString(span, ref index, item0);
                }
                span[index++] = ']';
            }
            if (this.NullableEnumerablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableEnumerablePresent");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableEnumerablePresent)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        global::GenJson.GenJsonWriter.WriteString(span, ref index, item0);
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableArrayPresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableArrayPresent");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableArrayPresent)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        global::GenJson.GenJsonWriter.WriteString(span, ref index, item0);
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableListPresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableListPresent");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableListPresent)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        global::GenJson.GenJsonWriter.WriteString(span, ref index, item0);
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableEnumerableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableEnumerableNull");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableEnumerableNull)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        global::GenJson.GenJsonWriter.WriteString(span, ref index, item0);
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableArrayNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableArrayNull");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableArrayNull)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        global::GenJson.GenJsonWriter.WriteString(span, ref index, item0);
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableListNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableListNull");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableListNull)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        global::GenJson.GenJsonWriter.WriteString(span, ref index, item0);
                    }
                    span[index++] = ']';
                }
            }
            span[index++] = '}';
        }

        public static EnumerableStringClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static EnumerableStringClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            global::System.Collections.Generic.IEnumerable<string>? _EnumerablePresent = default;
            string[]? _ArrayPresent = default;
            global::System.Collections.Generic.List<string>? _ListPresent = default;
            global::System.Collections.Generic.IEnumerable<string>? _NullableEnumerablePresent = default;
            string[]? _NullableArrayPresent = default;
            global::System.Collections.Generic.List<string>? _NullableListPresent = default;
            global::System.Collections.Generic.IEnumerable<string>? _NullableEnumerableNull = default;
            string[]? _NullableArrayNull = default;
            global::System.Collections.Generic.List<string>? _NullableListNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (_EnumerablePresent is null) return null;
                    if (_ArrayPresent is null) return null;
                    if (_ListPresent is null) return null;
                    return new EnumerableStringClass()
                    {
                        EnumerablePresent = _EnumerablePresent,
                        ArrayPresent = _ArrayPresent,
                        ListPresent = _ListPresent,
                        NullableEnumerablePresent = _NullableEnumerablePresent,
                        NullableArrayPresent = _NullableArrayPresent,
                        NullableListPresent = _NullableListPresent,
                        NullableEnumerableNull = _NullableEnumerableNull,
                        NullableArrayNull = _NullableArrayNull,
                        NullableListNull = _NullableListNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "EnumerablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<string>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _EnumerablePresent = list0;
                                break;
                            }
                            string? item0 = default;
                            if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out item0)) return null;
                            list0.Add(item0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "ArrayPresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<string>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _ArrayPresent = list0.ToArray();
                                break;
                            }
                            string? item0 = default;
                            if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out item0)) return null;
                            list0.Add(item0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "ListPresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<string>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _ListPresent = list0;
                                break;
                            }
                            string? item0 = default;
                            if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out item0)) return null;
                            list0.Add(item0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableEnumerablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<string>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableEnumerablePresent = list0;
                                break;
                            }
                            string? item0 = default;
                            if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out item0)) return null;
                            list0.Add(item0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableArrayPresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<string>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableArrayPresent = list0.ToArray();
                                break;
                            }
                            string? item0 = default;
                            if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out item0)) return null;
                            list0.Add(item0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableListPresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<string>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableListPresent = list0;
                                break;
                            }
                            string? item0 = default;
                            if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out item0)) return null;
                            list0.Add(item0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableEnumerableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<string>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableEnumerableNull = list0;
                                break;
                            }
                            string? item0 = default;
                            if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out item0)) return null;
                            list0.Add(item0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableArrayNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<string>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableArrayNull = list0.ToArray();
                                break;
                            }
                            string? item0 = default;
                            if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out item0)) return null;
                            list0.Add(item0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableListNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<string>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableListNull = list0;
                                break;
                            }
                            string? item0 = default;
                            if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out item0)) return null;
                            list0.Add(item0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class EnumerableParentClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 20;
            {
                size += 2;
                int count0 = 0;
                foreach (var item0 in this.EnumerablePresent)
                {
                    count0++;
                    size += item0.CalculateJsonSize();
                }
                if (count0 > 1) size += count0 - 1;
            }
            propertyCount++;
            size += 15;
            {
                size += 2;
                int count0 = 0;
                foreach (var item0 in this.ArrayPresent)
                {
                    count0++;
                    size += item0.CalculateJsonSize();
                }
                if (count0 > 1) size += count0 - 1;
            }
            propertyCount++;
            size += 14;
            {
                size += 2;
                int count0 = 0;
                foreach (var item0 in this.ListPresent)
                {
                    count0++;
                    size += item0.CalculateJsonSize();
                }
                if (count0 > 1) size += count0 - 1;
            }
            if (this.NullableEnumerablePresent is not null)
            {
                propertyCount++;
                size += 28;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableEnumerablePresent)
                    {
                        count0++;
                        size += item0.CalculateJsonSize();
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableArrayPresent is not null)
            {
                propertyCount++;
                size += 23;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableArrayPresent)
                    {
                        count0++;
                        size += item0.CalculateJsonSize();
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableListPresent is not null)
            {
                propertyCount++;
                size += 22;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableListPresent)
                    {
                        count0++;
                        size += item0.CalculateJsonSize();
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableEnumerableNull is not null)
            {
                propertyCount++;
                size += 25;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableEnumerableNull)
                    {
                        count0++;
                        size += item0.CalculateJsonSize();
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableArrayNull is not null)
            {
                propertyCount++;
                size += 20;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableArrayNull)
                    {
                        count0++;
                        size += item0.CalculateJsonSize();
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableListNull is not null)
            {
                propertyCount++;
                size += 19;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableListNull)
                    {
                        count0++;
                        size += item0.CalculateJsonSize();
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "EnumerablePresent");
            span[index++] = ':';
            {
                span[index++] = '[';
                bool firstItem0 = true;
                foreach (var item0 in this.EnumerablePresent)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    item0.WriteJson(span, ref index);
                }
                span[index++] = ']';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "ArrayPresent");
            span[index++] = ':';
            {
                span[index++] = '[';
                bool firstItem0 = true;
                foreach (var item0 in this.ArrayPresent)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    item0.WriteJson(span, ref index);
                }
                span[index++] = ']';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "ListPresent");
            span[index++] = ':';
            {
                span[index++] = '[';
                bool firstItem0 = true;
                foreach (var item0 in this.ListPresent)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    item0.WriteJson(span, ref index);
                }
                span[index++] = ']';
            }
            if (this.NullableEnumerablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableEnumerablePresent");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableEnumerablePresent)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        item0.WriteJson(span, ref index);
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableArrayPresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableArrayPresent");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableArrayPresent)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        item0.WriteJson(span, ref index);
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableListPresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableListPresent");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableListPresent)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        item0.WriteJson(span, ref index);
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableEnumerableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableEnumerableNull");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableEnumerableNull)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        item0.WriteJson(span, ref index);
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableArrayNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableArrayNull");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableArrayNull)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        item0.WriteJson(span, ref index);
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableListNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableListNull");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableListNull)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        item0.WriteJson(span, ref index);
                    }
                    span[index++] = ']';
                }
            }
            span[index++] = '}';
        }

        public static EnumerableParentClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static EnumerableParentClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            global::System.Collections.Generic.IEnumerable<global::GenJson.Tests.EmptyClass>? _EnumerablePresent = default;
            global::GenJson.Tests.EmptyClass[]? _ArrayPresent = default;
            global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>? _ListPresent = default;
            global::System.Collections.Generic.IEnumerable<global::GenJson.Tests.EmptyClass>? _NullableEnumerablePresent = default;
            global::GenJson.Tests.EmptyClass[]? _NullableArrayPresent = default;
            global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>? _NullableListPresent = default;
            global::System.Collections.Generic.IEnumerable<global::GenJson.Tests.EmptyClass>? _NullableEnumerableNull = default;
            global::GenJson.Tests.EmptyClass[]? _NullableArrayNull = default;
            global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>? _NullableListNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (_EnumerablePresent is null) return null;
                    if (_ArrayPresent is null) return null;
                    if (_ListPresent is null) return null;
                    return new EnumerableParentClass()
                    {
                        EnumerablePresent = _EnumerablePresent,
                        ArrayPresent = _ArrayPresent,
                        ListPresent = _ListPresent,
                        NullableEnumerablePresent = _NullableEnumerablePresent,
                        NullableArrayPresent = _NullableArrayPresent,
                        NullableListPresent = _NullableListPresent,
                        NullableEnumerableNull = _NullableEnumerableNull,
                        NullableArrayNull = _NullableArrayNull,
                        NullableListNull = _NullableListNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "EnumerablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _EnumerablePresent = list0;
                                break;
                            }
                            global::GenJson.Tests.EmptyClass? item0 = default;
                            item0 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                            if (item0 is null) return null;
                            list0.Add(item0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "ArrayPresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _ArrayPresent = list0.ToArray();
                                break;
                            }
                            global::GenJson.Tests.EmptyClass? item0 = default;
                            item0 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                            if (item0 is null) return null;
                            list0.Add(item0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "ListPresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _ListPresent = list0;
                                break;
                            }
                            global::GenJson.Tests.EmptyClass? item0 = default;
                            item0 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                            if (item0 is null) return null;
                            list0.Add(item0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableEnumerablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableEnumerablePresent = list0;
                                break;
                            }
                            global::GenJson.Tests.EmptyClass? item0 = default;
                            item0 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                            if (item0 is null) return null;
                            list0.Add(item0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableArrayPresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableArrayPresent = list0.ToArray();
                                break;
                            }
                            global::GenJson.Tests.EmptyClass? item0 = default;
                            item0 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                            if (item0 is null) return null;
                            list0.Add(item0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableListPresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableListPresent = list0;
                                break;
                            }
                            global::GenJson.Tests.EmptyClass? item0 = default;
                            item0 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                            if (item0 is null) return null;
                            list0.Add(item0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableEnumerableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableEnumerableNull = list0;
                                break;
                            }
                            global::GenJson.Tests.EmptyClass? item0 = default;
                            item0 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                            if (item0 is null) return null;
                            list0.Add(item0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableArrayNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableArrayNull = list0.ToArray();
                                break;
                            }
                            global::GenJson.Tests.EmptyClass? item0 = default;
                            item0 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                            if (item0 is null) return null;
                            list0.Add(item0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableListNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableListNull = list0;
                                break;
                            }
                            global::GenJson.Tests.EmptyClass? item0 = default;
                            item0 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                            if (item0 is null) return null;
                            list0.Add(item0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class NestedEnumerableClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 20;
            {
                size += 2;
                int count0 = 0;
                foreach (var item0 in this.EnumerablePresent)
                {
                    count0++;
                    {
                        size += 2;
                        int count1 = 0;
                        foreach (var item1 in item0)
                        {
                            count1++;
                            size += item1.CalculateJsonSize();
                        }
                        if (count1 > 1) size += count1 - 1;
                    }
                }
                if (count0 > 1) size += count0 - 1;
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "EnumerablePresent");
            span[index++] = ':';
            {
                span[index++] = '[';
                bool firstItem0 = true;
                foreach (var item0 in this.EnumerablePresent)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    {
                        span[index++] = '[';
                        bool firstItem1 = true;
                        foreach (var item1 in item0)
                        {
                            if (!firstItem1)
                            {
                                span[index++] = ',';
                            }
                            firstItem1 = false;
                            item1.WriteJson(span, ref index);
                        }
                        span[index++] = ']';
                    }
                }
                span[index++] = ']';
            }
            span[index++] = '}';
        }

        public static NestedEnumerableClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static NestedEnumerableClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            global::GenJson.Tests.EmptyClass[][]? _EnumerablePresent = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (_EnumerablePresent is null) return null;
                    return new NestedEnumerableClass()
                    {
                        EnumerablePresent = _EnumerablePresent,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "EnumerablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var list0 = new global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass[]>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == ']')
                            {
                                index++;
                                _EnumerablePresent = list0.ToArray();
                                break;
                            }
                            global::GenJson.Tests.EmptyClass[]? item0 = default;
                            {
                                var list1 = new global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>();
                                if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                                while (index < json.Length)
                                {
                                    global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                                    if (index >= json.Length) return null;
                                    if (json[index] == ']')
                                    {
                                        index++;
                                        item0 = list1.ToArray();
                                        break;
                                    }
                                    global::GenJson.Tests.EmptyClass? item1 = default;
                                    item1 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                                    if (item1 is null) return null;
                                    list1.Add(item1!);
                                    global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                                    if (index < json.Length && json[index] == ',')
                                    {
                                        index++;
                                    }
                                }
                            }
                            list0.Add(item0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class DictionaryClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 16;
            {
                size += 2;
                int count0 = 0;
                foreach (var kvp0 in this.PresentIntInt)
                {
                    count0++;
                    size += 3;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(kvp0.Key);
                    size += global::GenJson.GenJsonSizeHelper.GetSize(kvp0.Value);
                }
                if (count0 > 1) size += count0 - 1;
            }
            propertyCount++;
            size += 19;
            {
                size += 2;
                int count0 = 0;
                foreach (var kvp0 in this.PresentIntString)
                {
                    count0++;
                    size += 3;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(kvp0.Key);
                    size += global::GenJson.GenJsonSizeHelper.GetSize(kvp0.Value);
                }
                if (count0 > 1) size += count0 - 1;
            }
            propertyCount++;
            size += 19;
            {
                size += 2;
                int count0 = 0;
                foreach (var kvp0 in this.PresentStringInt)
                {
                    count0++;
                    size += 3;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(kvp0.Key) - 2;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(kvp0.Value);
                }
                if (count0 > 1) size += count0 - 1;
            }
            propertyCount++;
            size += 26;
            {
                size += 2;
                int count0 = 0;
                foreach (var kvp0 in this.PresentIntEnumerableInt)
                {
                    count0++;
                    size += 3;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(kvp0.Key);
                    {
                        size += 2;
                        int count1 = 0;
                        foreach (var item1 in kvp0.Value)
                        {
                            count1++;
                            size += global::GenJson.GenJsonSizeHelper.GetSize(item1);
                        }
                        if (count1 > 1) size += count1 - 1;
                    }
                }
                if (count0 > 1) size += count0 - 1;
            }
            propertyCount++;
            size += 35;
            {
                size += 2;
                int count0 = 0;
                foreach (var kvp0 in this.PresentDictionaryIntEmptyClasses)
                {
                    count0++;
                    size += 3;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(kvp0.Key);
                    size += kvp0.Value.CalculateJsonSize();
                }
                if (count0 > 1) size += count0 - 1;
            }
            if (this.NullableDictionaryIntIntNull is not null)
            {
                propertyCount++;
                size += 31;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var kvp0 in this.NullableDictionaryIntIntNull)
                    {
                        count0++;
                        size += 3;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(kvp0.Key);
                        size += global::GenJson.GenJsonSizeHelper.GetSize(kvp0.Value);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "PresentIntInt");
            span[index++] = ':';
            {
                span[index++] = '{';
                bool firstItem0 = true;
                foreach (var kvp0 in this.PresentIntInt)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    span[index++] = '"';
                    { if (!kvp0.Key.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))                    { throw new System.Exception("Buffer too small (Key)"); }
                    index += written; }
                    span[index++] = '"';
                    span[index++] = ':';
                    { if (!kvp0.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
                span[index++] = '}';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "PresentIntString");
            span[index++] = ':';
            {
                span[index++] = '{';
                bool firstItem0 = true;
                foreach (var kvp0 in this.PresentIntString)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    span[index++] = '"';
                    { if (!kvp0.Key.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))                    { throw new System.Exception("Buffer too small (Key)"); }
                    index += written; }
                    span[index++] = '"';
                    span[index++] = ':';
                    global::GenJson.GenJsonWriter.WriteString(span, ref index, kvp0.Value);
                }
                span[index++] = '}';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "PresentStringInt");
            span[index++] = ':';
            {
                span[index++] = '{';
                bool firstItem0 = true;
                foreach (var kvp0 in this.PresentStringInt)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    global::GenJson.GenJsonWriter.WriteString(span, ref index, kvp0.Key);
                    span[index++] = ':';
                    { if (!kvp0.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
                span[index++] = '}';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "PresentIntEnumerableInt");
            span[index++] = ':';
            {
                span[index++] = '{';
                bool firstItem0 = true;
                foreach (var kvp0 in this.PresentIntEnumerableInt)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    span[index++] = '"';
                    { if (!kvp0.Key.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))                    { throw new System.Exception("Buffer too small (Key)"); }
                    index += written; }
                    span[index++] = '"';
                    span[index++] = ':';
                    {
                        span[index++] = '[';
                        bool firstItem1 = true;
                        foreach (var item1 in kvp0.Value)
                        {
                            if (!firstItem1)
                            {
                                span[index++] = ',';
                            }
                            firstItem1 = false;
                            { if (!item1.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                            { throw new System.Exception("Buffer too small (Primitive)"); }
                            index += written;
                            }
                        }
                        span[index++] = ']';
                    }
                }
                span[index++] = '}';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "PresentDictionaryIntEmptyClasses");
            span[index++] = ':';
            {
                span[index++] = '{';
                bool firstItem0 = true;
                foreach (var kvp0 in this.PresentDictionaryIntEmptyClasses)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    span[index++] = '"';
                    { if (!kvp0.Key.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))                    { throw new System.Exception("Buffer too small (Key)"); }
                    index += written; }
                    span[index++] = '"';
                    span[index++] = ':';
                    kvp0.Value.WriteJson(span, ref index);
                }
                span[index++] = '}';
            }
            if (this.NullableDictionaryIntIntNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableDictionaryIntIntNull");
                span[index++] = ':';
                {
                    span[index++] = '{';
                    bool firstItem0 = true;
                    foreach (var kvp0 in this.NullableDictionaryIntIntNull)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        span[index++] = '"';
                        { if (!kvp0.Key.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))                        { throw new System.Exception("Buffer too small (Key)"); }
                        index += written; }
                        span[index++] = '"';
                        span[index++] = ':';
                        { if (!kvp0.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                        { throw new System.Exception("Buffer too small (Primitive)"); }
                        index += written;
                        }
                    }
                    span[index++] = '}';
                }
            }
            span[index++] = '}';
        }

        public static DictionaryClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static DictionaryClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            global::System.Collections.Generic.IReadOnlyDictionary<int, int>? _PresentIntInt = default;
            global::System.Collections.Generic.IReadOnlyDictionary<int, string>? _PresentIntString = default;
            global::System.Collections.Generic.IReadOnlyDictionary<string, int>? _PresentStringInt = default;
            global::System.Collections.Generic.IReadOnlyDictionary<int, global::System.Collections.Generic.IEnumerable<int>>? _PresentIntEnumerableInt = default;
            global::System.Collections.Generic.IReadOnlyDictionary<int, global::GenJson.Tests.EmptyClass>? _PresentDictionaryIntEmptyClasses = default;
            global::System.Collections.Generic.IReadOnlyDictionary<int, int>? _NullableDictionaryIntIntNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (_PresentIntInt is null) return null;
                    if (_PresentIntString is null) return null;
                    if (_PresentStringInt is null) return null;
                    if (_PresentIntEnumerableInt is null) return null;
                    if (_PresentDictionaryIntEmptyClasses is null) return null;
                    return new DictionaryClass()
                    {
                        PresentIntInt = _PresentIntInt,
                        PresentIntString = _PresentIntString,
                        PresentStringInt = _PresentStringInt,
                        PresentIntEnumerableInt = _PresentIntEnumerableInt,
                        PresentDictionaryIntEmptyClasses = _PresentDictionaryIntEmptyClasses,
                        NullableDictionaryIntIntNull = _NullableDictionaryIntIntNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "PresentIntInt"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var dict0 = new global::System.Collections.Generic.Dictionary<int, int>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == '}')
                            {
                                index++;
                                _PresentIntInt = dict0;
                                break;
                            }
                            if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var keyStr0) || keyStr0 is null) return null;
                            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                            if (!int.TryParse(keyStr0, out int key0)) return null;
                            int val0 = default;
                            if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var val0_tmp)) return null;
                            val0 = val0_tmp;
                            dict0.Add(key0, val0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "PresentIntString"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var dict0 = new global::System.Collections.Generic.Dictionary<int, string>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == '}')
                            {
                                index++;
                                _PresentIntString = dict0;
                                break;
                            }
                            if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var keyStr0) || keyStr0 is null) return null;
                            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                            if (!int.TryParse(keyStr0, out int key0)) return null;
                            string? val0 = default;
                            if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out val0)) return null;
                            dict0.Add(key0, val0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "PresentStringInt"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var dict0 = new global::System.Collections.Generic.Dictionary<string, int>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == '}')
                            {
                                index++;
                                _PresentStringInt = dict0;
                                break;
                            }
                            if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var keyStr0) || keyStr0 is null) return null;
                            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                            string key0 = keyStr0;
                            int val0 = default;
                            if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var val0_tmp)) return null;
                            val0 = val0_tmp;
                            dict0.Add(key0, val0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "PresentIntEnumerableInt"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var dict0 = new global::System.Collections.Generic.Dictionary<int, global::System.Collections.Generic.IEnumerable<int>>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == '}')
                            {
                                index++;
                                _PresentIntEnumerableInt = dict0;
                                break;
                            }
                            if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var keyStr0) || keyStr0 is null) return null;
                            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                            if (!int.TryParse(keyStr0, out int key0)) return null;
                            global::System.Collections.Generic.IEnumerable<int>? val0 = default;
                            {
                                var list1 = new global::System.Collections.Generic.List<int>();
                                if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '[')) return null;
                                while (index < json.Length)
                                {
                                    global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                                    if (index >= json.Length) return null;
                                    if (json[index] == ']')
                                    {
                                        index++;
                                        val0 = list1;
                                        break;
                                    }
                                    int item1 = default;
                                    if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var item1_tmp)) return null;
                                    item1 = item1_tmp;
                                    list1.Add(item1);
                                    global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                                    if (index < json.Length && json[index] == ',')
                                    {
                                        index++;
                                    }
                                }
                            }
                            dict0.Add(key0, val0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "PresentDictionaryIntEmptyClasses"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var dict0 = new global::System.Collections.Generic.Dictionary<int, global::GenJson.Tests.EmptyClass>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == '}')
                            {
                                index++;
                                _PresentDictionaryIntEmptyClasses = dict0;
                                break;
                            }
                            if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var keyStr0) || keyStr0 is null) return null;
                            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                            if (!int.TryParse(keyStr0, out int key0)) return null;
                            global::GenJson.Tests.EmptyClass? val0 = default;
                            val0 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                            if (val0 is null) return null;
                            dict0.Add(key0, val0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableDictionaryIntIntNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var dict0 = new global::System.Collections.Generic.Dictionary<int, int>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == '}')
                            {
                                index++;
                                _NullableDictionaryIntIntNull = dict0;
                                break;
                            }
                            if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var keyStr0) || keyStr0 is null) return null;
                            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                            if (!int.TryParse(keyStr0, out int key0)) return null;
                            int val0 = default;
                            if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var val0_tmp)) return null;
                            val0 = val0_tmp;
                            dict0.Add(key0, val0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class NestedDictionaryClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            {
                size += 2;
                int count0 = 0;
                foreach (var kvp0 in this.Present)
                {
                    count0++;
                    size += 3;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(kvp0.Key);
                    {
                        size += 2;
                        int count1 = 0;
                        foreach (var kvp1 in kvp0.Value)
                        {
                            count1++;
                            size += 3;
                            size += global::GenJson.GenJsonSizeHelper.GetSize(kvp1.Key);
                            size += kvp1.Value.CalculateJsonSize();
                        }
                        if (count1 > 1) size += count1 - 1;
                    }
                }
                if (count0 > 1) size += count0 - 1;
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            {
                span[index++] = '{';
                bool firstItem0 = true;
                foreach (var kvp0 in this.Present)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    span[index++] = '"';
                    { if (!kvp0.Key.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))                    { throw new System.Exception("Buffer too small (Key)"); }
                    index += written; }
                    span[index++] = '"';
                    span[index++] = ':';
                    {
                        span[index++] = '{';
                        bool firstItem1 = true;
                        foreach (var kvp1 in kvp0.Value)
                        {
                            if (!firstItem1)
                            {
                                span[index++] = ',';
                            }
                            firstItem1 = false;
                            span[index++] = '"';
                            { if (!kvp1.Key.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))                            { throw new System.Exception("Buffer too small (Key)"); }
                            index += written; }
                            span[index++] = '"';
                            span[index++] = ':';
                            kvp1.Value.WriteJson(span, ref index);
                        }
                        span[index++] = '}';
                    }
                }
                span[index++] = '}';
            }
            span[index++] = '}';
        }

        public static NestedDictionaryClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static NestedDictionaryClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            global::System.Collections.Generic.IReadOnlyDictionary<int, global::System.Collections.Generic.IReadOnlyDictionary<int, global::GenJson.Tests.EmptyClass>>? _Present = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (_Present is null) return null;
                    return new NestedDictionaryClass()
                    {
                        Present = _Present,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    {
                        var dict0 = new global::System.Collections.Generic.Dictionary<int, global::System.Collections.Generic.IReadOnlyDictionary<int, global::GenJson.Tests.EmptyClass>>();
                        if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index >= json.Length) return null;
                            if (json[index] == '}')
                            {
                                index++;
                                _Present = dict0;
                                break;
                            }
                            if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var keyStr0) || keyStr0 is null) return null;
                            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                            if (!int.TryParse(keyStr0, out int key0)) return null;
                            global::System.Collections.Generic.IReadOnlyDictionary<int, global::GenJson.Tests.EmptyClass>? val0 = default;
                            {
                                var dict1 = new global::System.Collections.Generic.Dictionary<int, global::GenJson.Tests.EmptyClass>();
                                if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
                                while (index < json.Length)
                                {
                                    global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                                    if (index >= json.Length) return null;
                                    if (json[index] == '}')
                                    {
                                        index++;
                                        val0 = dict1;
                                        break;
                                    }
                                    if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var keyStr1) || keyStr1 is null) return null;
                                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                                    if (!int.TryParse(keyStr1, out int key1)) return null;
                                    global::GenJson.Tests.EmptyClass? val1 = default;
                                    val1 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                                    if (val1 is null) return null;
                                    dict1.Add(key1, val1!);
                                    global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                                    if (index < json.Length && json[index] == ',')
                                    {
                                        index++;
                                    }
                                }
                            }
                            dict0.Add(key0, val0!);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (index < json.Length && json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial record class ParentRecordDefault
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 8;
            size += this.Child.CalculateJsonSize();
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Child");
            span[index++] = ':';
            this.Child.WriteJson(span, ref index);
            span[index++] = '}';
        }

        public static ParentRecordDefault? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static ParentRecordDefault? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            global::GenJson.Tests.EmptyClass? _Child = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (_Child is null) return null;
                    return new ParentRecordDefault(_Child)
;
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Child"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    _Child = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                    if (_Child is null) return null;
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial record class ParentRecordClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 8;
            size += this.Child.CalculateJsonSize();
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Child");
            span[index++] = ':';
            this.Child.WriteJson(span, ref index);
            span[index++] = '}';
        }

        public static ParentRecordClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static ParentRecordClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            global::GenJson.Tests.EmptyClass? _Child = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (_Child is null) return null;
                    return new ParentRecordClass(_Child)
;
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Child"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    _Child = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                    if (_Child is null) return null;
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial record struct ParentRecordStruct
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 8;
            size += this.Child.CalculateJsonSize();
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Child");
            span[index++] = ':';
            this.Child.WriteJson(span, ref index);
            span[index++] = '}';
        }

        public static ParentRecordStruct? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static ParentRecordStruct? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            global::GenJson.Tests.EmptyClass? _Child = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (_Child is null) return null;
                    return new ParentRecordStruct(_Child)
;
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Child"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    _Child = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                    if (_Child is null) return null;
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class StrictClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 11;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Required);
            if (this.Optional is not null)
            {
                propertyCount++;
                size += 11;
                size += global::GenJson.GenJsonSizeHelper.GetSize(this.Optional);
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Required");
            span[index++] = ':';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, this.Required);
            if (this.Optional is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "Optional");
                span[index++] = ':';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, this.Optional);
            }
            span[index++] = '}';
        }

        public static StrictClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static StrictClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            string? _Required = default;
            string? _Optional = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (_Required is null) return null;
                    return new StrictClass()
                    {
                        Required = _Required,
                        Optional = _Optional,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Required"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out _Required)) return null;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Optional"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out _Optional)) return null;
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial record class StrictRecordReference
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 11;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Required);
            if (this.Optional is not null)
            {
                propertyCount++;
                size += 11;
                size += global::GenJson.GenJsonSizeHelper.GetSize(this.Optional);
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Required");
            span[index++] = ':';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, this.Required);
            if (this.Optional is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "Optional");
                span[index++] = ':';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, this.Optional);
            }
            span[index++] = '}';
        }

        public static StrictRecordReference? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static StrictRecordReference? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            string? _Required = default;
            string? _Optional = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (_Required is null) return null;
                    return new StrictRecordReference(_Required, _Optional)
;
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Required"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out _Required)) return null;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Optional"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out _Optional)) return null;
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial record class StrictRecordValue
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 11;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Required);
            if (this.Optional is not null)
            {
                propertyCount++;
                size += 11;
                if (this.Optional is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.Optional.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Required");
            span[index++] = ':';
            { if (!this.Required.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
            { throw new System.Exception("Buffer too small (Primitive)"); }
            index += written;
            }
            if (this.Optional is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "Optional");
                span[index++] = ':';
                if (this.Optional is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!this.Optional.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
            }
            span[index++] = '}';
        }

        public static StrictRecordValue? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static StrictRecordValue? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            int _Required = default;
            bool _Required_set = false;
            int? _Optional = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (!_Required_set) return null;
                    return new StrictRecordValue(_Required, _Optional)
;
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Required"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var _Required_tmp)) return null;
                    _Required = _Required_tmp;
                    _Required_set = true;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Optional"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _Optional = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var _Optional_tmp)) return null;
                        _Optional = _Optional_tmp;
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class FallbackEnumClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 8;
            size += global::GenJson.GenJsonSizeHelper.GetSize((int)this.Value);
            if (this.NullableValue is not null)
            {
                propertyCount++;
                size += 16;
                if (this.NullableValue is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize((int)this.NullableValue.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Value");
            span[index++] = ':';
            { if (!((int)this.Value).TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture)) throw new System.Exception("Buffer too small"); index += written; }
            if (this.NullableValue is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableValue");
                span[index++] = ':';
                if (this.NullableValue is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!((int)this.NullableValue.Value).TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture)) throw new System.Exception("Buffer too small"); index += written; }
                }
            }
            span[index++] = '}';
        }

        public static FallbackEnumClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static FallbackEnumClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            global::GenJson.Tests.FallbackEnum _Value = default;
            bool _Value_set = false;
            global::GenJson.Tests.FallbackEnum? _NullableValue = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    if (!_Value_set) return null;
                    return new FallbackEnumClass()
                    {
                        Value = _Value,
                        NullableValue = _NullableValue,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Value"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var _Value_val))
                    {
                        if (System.Enum.IsDefined(typeof(global::GenJson.Tests.FallbackEnum), (global::GenJson.Tests.FallbackEnum)_Value_val))
                        {
                            _Value = (global::GenJson.Tests.FallbackEnum)_Value_val;
                        }
                        else
                        {
                            _Value = (global::GenJson.Tests.FallbackEnum)(0);
                        }
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                        _Value = (global::GenJson.Tests.FallbackEnum)(0);
                    }
                    _Value_set = true;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableValue"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullableValue = null;
                    }
                    else
                    {
                        if (global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var _NullableValue_val))
                        {
                            if (System.Enum.IsDefined(typeof(global::GenJson.Tests.FallbackEnum), (global::GenJson.Tests.FallbackEnum)_NullableValue_val))
                            {
                                _NullableValue = (global::GenJson.Tests.FallbackEnum)_NullableValue_val;
                            }
                            else
                            {
                                _NullableValue = (global::GenJson.Tests.FallbackEnum)(0);
                            }
                        }
                        else
                        {
                            if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                            _NullableValue = (global::GenJson.Tests.FallbackEnum)(0);
                        }
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class StringNullableDisableClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            if (this.Present is not null)
            {
                propertyCount++;
                size += 10;
                size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            }
            if (this.Null is not null)
            {
                propertyCount++;
                size += 7;
                size += global::GenJson.GenJsonSizeHelper.GetSize(this.Null);
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            bool first = true;
            if (this.Present is not null)
            {
                first = false;
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
                span[index++] = ':';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, this.Present);
            }
            if (this.Null is not null)
            {
                if (!first)
                {
                    span[index++] = ',';
                }
                first = false;
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "Null");
                span[index++] = ':';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, this.Null);
            }
            span[index++] = '}';
        }

        public static StringNullableDisableClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static StringNullableDisableClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            string? _Present = default;
            string? _Null = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    return new StringNullableDisableClass()
                    {
                        Present = _Present,
                        Null = _Null,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out _Present)) return null;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Null"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out _Null)) return null;
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class DateTimeNullableDisableClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                if (this.NullablePresent is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullablePresent.Value);
                }
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                if (this.NullableNull is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullableNull.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            {
                span[index++] = '"';
                if (!this.Present.TryFormat(span.Slice(index), out int written, "O", System.Globalization.CultureInfo.InvariantCulture))                { throw new System.Exception("Buffer too small (Formatted)"); }
                index += written;
                span[index++] = '"';
            }
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                if (this.NullablePresent is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    {
                        span[index++] = '"';
                        if (!this.NullablePresent.Value.TryFormat(span.Slice(index), out int written, "O", System.Globalization.CultureInfo.InvariantCulture))                        { throw new System.Exception("Buffer too small (Formatted)"); }
                        index += written;
                        span[index++] = '"';
                    }
                }
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                if (this.NullableNull is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    {
                        span[index++] = '"';
                        if (!this.NullableNull.Value.TryFormat(span.Slice(index), out int written, "O", System.Globalization.CultureInfo.InvariantCulture))                        { throw new System.Exception("Buffer too small (Formatted)"); }
                        index += written;
                        span[index++] = '"';
                    }
                }
            }
            span[index++] = '}';
        }

        public static DateTimeNullableDisableClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static DateTimeNullableDisableClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            global::System.DateTime _Present = default;
            global::System.DateTime? _NullablePresent = default;
            global::System.DateTime? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    return new DateTimeNullableDisableClass()
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var _Present_str) || !System.DateTime.TryParse(_Present_str, System.Globalization.CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.RoundtripKind, out var _Present_val)) return null;
                    _Present = _Present_val;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullablePresent = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var _NullablePresent_str) || !System.DateTime.TryParse(_NullablePresent_str, System.Globalization.CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.RoundtripKind, out var _NullablePresent_val)) return null;
                        _NullablePresent = _NullablePresent_val;
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullableNull = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseString(json, ref index, out var _NullableNull_str) || !System.DateTime.TryParse(_NullableNull_str, System.Globalization.CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.RoundtripKind, out var _NullableNull_val)) return null;
                        _NullableNull = _NullableNull_val;
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial class ByteNullableDisableClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                if (this.NullablePresent is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullablePresent.Value);
                }
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                if (this.NullableNull is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullableNull.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            { if (!this.Present.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
            { throw new System.Exception("Buffer too small (Primitive)"); }
            index += written;
            }
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                if (this.NullablePresent is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!this.NullablePresent.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                if (this.NullableNull is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!this.NullableNull.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
            }
            span[index++] = '}';
        }

        public static ByteNullableDisableClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static ByteNullableDisableClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            byte _Present = default;
            byte? _NullablePresent = default;
            byte? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    return new ByteNullableDisableClass()
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseByte(json, ref index, out var _Present_tmp)) return null;
                    _Present = _Present_tmp;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullablePresent = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseByte(json, ref index, out var _NullablePresent_tmp)) return null;
                        _NullablePresent = _NullablePresent_tmp;
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        if (!global::GenJson.GenJsonParser.TryParseNull(json, ref index)) return null;
                        _NullableNull = null;
                    }
                    else
                    {
                        if (!global::GenJson.GenJsonParser.TryParseByte(json, ref index, out var _NullableNull_tmp)) return null;
                        _NullableNull = _NullableNull_tmp;
                    }
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial record class ParentNullableDisableClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            if (this.Present is not null)
            {
                propertyCount++;
                size += 10;
                size += this.Present.CalculateJsonSize();
            }
            if (this.Null is not null)
            {
                propertyCount++;
                size += 7;
                size += this.Null.CalculateJsonSize();
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            bool first = true;
            if (this.Present is not null)
            {
                first = false;
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
                span[index++] = ':';
                this.Present.WriteJson(span, ref index);
            }
            if (this.Null is not null)
            {
                if (!first)
                {
                    span[index++] = ',';
                }
                first = false;
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "Null");
                span[index++] = ':';
                this.Null.WriteJson(span, ref index);
            }
            span[index++] = '}';
        }

        public static ParentNullableDisableClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static ParentNullableDisableClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            global::GenJson.Tests.ChildNullableDisableClass? _Present = default;
            global::GenJson.Tests.ChildNullableDisableClass? _Null = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    return new ParentNullableDisableClass(_Present, _Null)
;
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    _Present = global::GenJson.Tests.ChildNullableDisableClass.Parse(json, ref index);
                    if (_Present is null) return null;
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Null"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    _Null = global::GenJson.Tests.ChildNullableDisableClass.Parse(json, ref index);
                    if (_Null is null) return null;
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

  
#nullable enable
namespace GenJson.Tests
{
    partial record class ChildNullableDisableClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 8;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Value);
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Value");
            span[index++] = ':';
            { if (!this.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
            { throw new System.Exception("Buffer too small (Primitive)"); }
            index += written;
            }
            span[index++] = '}';
        }

        public static ChildNullableDisableClass? FromJson(string json)
        {
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            var result = Parse(span, ref index);
            return result;
        }

        internal static ChildNullableDisableClass? Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
            if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, '{')) return null;
            int _Value = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index >= json.Length) return null;
                if (json[index] == '}')
                {
                    index++;
                    return new ChildNullableDisableClass(_Value)
;
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Value"))
                {
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TryParseInt(json, ref index, out var _Value_tmp)) return null;
                    _Value = _Value_tmp;
                    matched = true;
                }
                if (!matched)
                {
                    if (!global::GenJson.GenJsonParser.TrySkipString(json, ref index)) return null;
                    if (!global::GenJson.GenJsonParser.TryExpect(json, ref index, ':')) return null;
                    if (!global::GenJson.GenJsonParser.TrySkipValue(json, ref index)) return null;
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (index < json.Length && json[index] == ',')
                {
                    index++;
                }
            }
            return null;
        }
    }
}

]
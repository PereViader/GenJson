[  
#nullable enable
namespace GenJson
{
    using System;
    using System.Globalization;

    internal static class GenJsonParser
    {
        public static void SkipWhitespace(ReadOnlySpan<char> json, ref int index)
        {
            while (index < json.Length && char.IsWhiteSpace(json[index]))
            {
                index++;
            }
        }

        public static void Expect(ReadOnlySpan<char> json, ref int index, char expected)
        {
            SkipWhitespace(json, ref index);
            if (index >= json.Length || json[index] != expected)
            {
                throw new Exception($"Expected '{expected}' at {index}");
            }
            index++;
        }

        public static string ParseString(ReadOnlySpan<char> json, ref int index)
        {
            Expect(json, ref index, '"');
            int start = index;
            bool escaped = false;
            while (index < json.Length)
            {
                var c = json[index++];
                if (c == '"')
                {
                    if (!escaped)
                        return new string(json.Slice(start, index - start - 1));

                    var content = json.Slice(start, index - start - 1);
                    return UnescapeString(content);
                }
                
                if (c == '\\')
                {
                    escaped = true;
                    if (index >= json.Length) throw new Exception("Unexpected end of json string at " + index);
                    c = json[index++];
                    if (c == 'u') index += 4;
                }
            }
            throw new Exception("Unterminated string at " + index);
        }

        private static string UnescapeString(ReadOnlySpan<char> input)
        {
            int maxLen = input.Length;
            if (maxLen <= 128)
            {
                Span<char> buffer = stackalloc char[maxLen];
                int written = UnescapeInto(input, buffer);
                return new string(buffer.Slice(0, written));
            }
            else
            {
                char[] rented = System.Buffers.ArrayPool<char>.Shared.Rent(maxLen);
                try
                {
                    int written = UnescapeInto(input, rented);
                    return new string(rented, 0, written);
                }
                finally
                {
                    System.Buffers.ArrayPool<char>.Shared.Return(rented);
                }
            }
        }

        private static int UnescapeInto(ReadOnlySpan<char> input, Span<char> output)
        {
            int readIdx = 0;
            int writeIdx = 0;
            while (readIdx < input.Length)
            {
                var c = input[readIdx++];
                if (c == '\\')
                {
                    c = input[readIdx++];
                    switch (c)
                    {
                        case '"': output[writeIdx++] = '"'; break;
                        case '\\': output[writeIdx++] = '\\'; break;
                        case '/': output[writeIdx++] = '/'; break;
                        case 'b': output[writeIdx++] = '\b'; break;
                        case 'f': output[writeIdx++] = '\f'; break;
                        case 'n': output[writeIdx++] = '\n'; break;
                        case 'r': output[writeIdx++] = '\r'; break;
                        case 't': output[writeIdx++] = '\t'; break;
                        case 'u':
                            var hexSequence = input.Slice(readIdx, 4);
                            readIdx += 4;
                            output[writeIdx++] = (char)int.Parse(hexSequence, NumberStyles.HexNumber);
                            break;
                        default: output[writeIdx++] = c; break;
                    }
                }
                else
                {
                    output[writeIdx++] = c;
                }
            }
            return writeIdx;
        }

        public static void SkipString(ReadOnlySpan<char> json, ref int index)
        {
            Expect(json, ref index, '"');
            while (index < json.Length)
            {
                var c = json[index++];
                if (c == '"') return;
                if (c == '\\')
                {
                    if (index >= json.Length) throw new Exception("Unexpected end of json string at " + index);
                    index++;
                }
            }
            throw new Exception("Unterminated string at " + index);
        }
        
        public static bool MatchesKey(ReadOnlySpan<char> json, ref int index, string expected)
        {
            int originalIndex = index;
            SkipWhitespace(json, ref index);
            if (index >= json.Length || json[index] != '"')
            {
                index = originalIndex;
                return false;
            }
            index++; // '"'

            int expectedIndex = 0;
            while (index < json.Length)
            {
                var c = json[index++];
                if (c == '"')
                {
                    if (expectedIndex == expected.Length) return true;
                    index = originalIndex;
                    return false;
                }
                
                if (c == '\\')
                {
                    if (index >= json.Length) throw new Exception("Unexpected end of json string at " + index);
                    c = json[index++];
                    char unescaped;
                     switch (c)
                    {
                        case '"': unescaped = '"'; break;
                        case '\\': unescaped = '\\'; break;
                        case '/': unescaped = '/'; break;
                        case 'b': unescaped = '\b'; break;
                        case 'f': unescaped = '\f'; break;
                        case 'n': unescaped = '\n'; break;
                        case 'r': unescaped = '\r'; break;
                        case 't': unescaped = '\t'; break;
                        case 'u': 
                            var hexSequence = json.Slice(index, 4);
                            index += 4;
                            unescaped = (char)int.Parse(hexSequence, NumberStyles.HexNumber);
                            break;
                        default: unescaped = c; break;
                    }
                    if (expectedIndex >= expected.Length || expected[expectedIndex++] != unescaped)
                    {
                        index = originalIndex;
                        return false;
                    }
                }
                else
                {
                    if (expectedIndex >= expected.Length || expected[expectedIndex++] != c)
                    {
                        index = originalIndex;
                        return false;
                    }
                }
            }
            index = originalIndex;
            return false;
        }
        
        public static char ParseChar(ReadOnlySpan<char> json, ref int index)
        {
            var s = ParseString(json, ref index);
            if (s.Length != 1) throw new Exception("Expected string of length 1 for char at " + index);
            return s[0];
        }

        public static int ParseInt(ReadOnlySpan<char> json, ref int index) => (int)ParseLong(json, ref index);
        public static uint ParseUInt(ReadOnlySpan<char> json, ref int index) => (uint)ParseLong(json, ref index);
        public static short ParseShort(ReadOnlySpan<char> json, ref int index) => (short)ParseLong(json, ref index);
        public static ushort ParseUShort(ReadOnlySpan<char> json, ref int index) => (ushort)ParseLong(json, ref index);
        public static byte ParseByte(ReadOnlySpan<char> json, ref int index) => (byte)ParseLong(json, ref index);
        public static sbyte ParseSByte(ReadOnlySpan<char> json, ref int index) => (sbyte)ParseLong(json, ref index);

        public static long ParseLong(ReadOnlySpan<char> json, ref int index)
        {
            SkipWhitespace(json, ref index);
            int start = index;
            if (index < json.Length && json[index] == '-') index++;
            while (index < json.Length && char.IsDigit(json[index])) index++;
            var slice = json.Slice(start, index - start);
            return long.Parse(slice);
        }
        
        public static ulong ParseULong(ReadOnlySpan<char> json, ref int index)
        {
            SkipWhitespace(json, ref index);
            int start = index;
            while (index < json.Length && char.IsDigit(json[index])) index++;
            var slice = json.Slice(start, index - start);
            return ulong.Parse(slice);
        }

        public static double ParseDouble(ReadOnlySpan<char> json, ref int index)
        {
            SkipWhitespace(json, ref index);
            int start = index;
            if (index < json.Length && json[index] == '-') index++;
            while (index < json.Length && (char.IsDigit(json[index]) || json[index] == '.' || json[index] == 'e' || json[index] == 'E' || json[index] == '+' || json[index] == '-')) index++;
            var slice = json.Slice(start, index - start);
            return double.Parse(slice, CultureInfo.InvariantCulture);
        }
        
        public static float ParseFloat(ReadOnlySpan<char> json, ref int index) => (float)ParseDouble(json, ref index);

        public static decimal ParseDecimal(ReadOnlySpan<char> json, ref int index)
        {
            SkipWhitespace(json, ref index);
            int start = index;
            if (index < json.Length && json[index] == '-') index++;
            while (index < json.Length && (char.IsDigit(json[index]) || json[index] == '.' || json[index] == 'e' || json[index] == 'E' || json[index] == '+' || json[index] == '-')) index++;
            var slice = json.Slice(start, index - start);
            return decimal.Parse(slice, CultureInfo.InvariantCulture);
        }

        public static bool ParseBoolean(ReadOnlySpan<char> json, ref int index)
        {
            SkipWhitespace(json, ref index);
            if (json.Length - index >= 4 && json.Slice(index, 4).SequenceEqual("true"))
            {
                index += 4;
                return true;
            }
            if (json.Length - index >= 5 && json.Slice(index, 5).SequenceEqual("false"))
            {
                index += 5;
                return false;
            }
            throw new Exception("Expected boolean at " + index);
        }

        public static bool IsNull(ReadOnlySpan<char> json, ref int index)
        {
            SkipWhitespace(json, ref index);
            return json.Length - index >= 4 && json.Slice(index, 4).SequenceEqual("null");
        }

        public static void ParseNull(ReadOnlySpan<char> json, ref int index)
        {
            SkipWhitespace(json, ref index);
            if (json.Length - index >= 4 && json.Slice(index, 4).SequenceEqual("null"))
            {
                index += 4;
                return;
            }
             throw new Exception("Expected null at " + index);
        }
        
        public static void SkipValue(ReadOnlySpan<char> json, ref int index)
        {
            SkipWhitespace(json, ref index);
            if (index >= json.Length) return;
            char c = json[index];
            if (c == '"')
            {
                SkipString(json, ref index);
            }
            else if (c == '{')
            {
                index++;
                while (index < json.Length)
                {
                    SkipWhitespace(json, ref index);
                    if (json[index] == '}')
                    {
                        index++;
                        return;
                    }
                    SkipValue(json, ref index); // Key (string) is a value
                    SkipWhitespace(json, ref index);
                    if (json[index] == ':') index++;
                    SkipValue(json, ref index); // Value
                    SkipWhitespace(json, ref index);
                    if (json[index] == ',') index++;
                }
            }
            else if (c == '[')
            {
                index++;
                while (index < json.Length)
                {
                    SkipWhitespace(json, ref index);
                    if (json[index] == ']')
                    {
                        index++;
                        return;
                    }
                    SkipValue(json, ref index);
                    SkipWhitespace(json, ref index);
                    if (json[index] == ',') index++;
                }
            }
            else if (char.IsDigit(c) || c == '-')
            {
                if (c == '-') index++;
                while (index < json.Length && (char.IsDigit(json[index]) || json[index] == '.' || json[index] == 'e' || json[index] == 'E' || json[index] == '+' || json[index] == '-')) index++;
            }
            else if (c == 't') // true
            {
                index += 4;
            }
            else if (c == 'f') // false
            {
                index += 5;
            }
            else if (c == 'n') // null
            {
                index += 4;
            }
            else
            {
                index++; // Unknown
            }
        }
    }
    internal static class GenJsonWriter
    {
        public static void WriteString(System.Span<char> span, ref int index, string value)
        {
            span[index++] = '"';
            foreach (var c in value)
            {
                if (c == '"') { span[index++] = '\\'; span[index++] = '"'; }
                else if (c == '\\') { span[index++] = '\\'; span[index++] = '\\'; }
                else if (c == '\b') { span[index++] = '\\'; span[index++] = 'b'; }
                else if (c == '\f') { span[index++] = '\\'; span[index++] = 'f'; }
                else if (c == '\n') { span[index++] = '\\'; span[index++] = 'n'; }
                else if (c == '\r') { span[index++] = '\\'; span[index++] = 'r'; }
                else if (c == '\t') { span[index++] = '\\'; span[index++] = 't'; }
                else if (c < ' ')
                {
                    span[index++] = '\\';
                    span[index++] = 'u';
                    span[index++] = '0';
                    span[index++] = '0';
                    int val = c;
                    span[index++] = GetHex(val >> 4);
                    span[index++] = GetHex(val & 0xF);
                }
                else
                {
                    span[index++] = c;
                }
            }
            span[index++] = '"';
        }



        private static char GetHex(int n) => (char)(n < 10 ? n + '0' : n - 10 + 'a');
    }

    internal static class GenJsonSizeHelper
    {
        public static int GetSize(int value)
        {
            if (value == 0) return 1;
            if (value == int.MinValue) return 11;
            if (value < 0) return 1 + GetSize(-value);
            if (value < 10) return 1;
            if (value < 100) return 2;
            if (value < 1000) return 3;
            if (value < 10000) return 4;
            if (value < 100000) return 5;
            if (value < 1000000) return 6;
            if (value < 10000000) return 7;
            if (value < 100000000) return 8;
            if (value < 1000000000) return 9;
            return 10;
        }

        public static int GetSize(long value)
        {
            if (value == 0) return 1;
            if (value == long.MinValue) return 20;
            if (value < 0) return 1 + GetSize(-value);
            if (value < 10L) return 1;
            if (value < 100L) return 2;
            if (value < 1000L) return 3;
            if (value < 10000L) return 4;
            if (value < 100000L) return 5;
            if (value < 1000000L) return 6;
            if (value < 10000000L) return 7;
            if (value < 100000000L) return 8;
            if (value < 1000000000L) return 9;
            if (value < 10000000000L) return 10;
            if (value < 100000000000L) return 11;
            if (value < 1000000000000L) return 12;
            if (value < 10000000000000L) return 13;
            if (value < 100000000000000L) return 14;
            if (value < 1000000000000000L) return 15;
            if (value < 10000000000000000L) return 16;
            if (value < 100000000000000000L) return 17;
            if (value < 1000000000000000000L) return 18;
            return 19;
        }
        
        public static int GetSize(bool value) => value ? 4 : 5;
        public static int GetSize(char value) => 3; // "c"
        
        public static int GetSize(string? value)
        {
            if (value is null) return 0;
            int size = 2;
            foreach (var c in value)
            {
                if (c == '"' || c == '\\' || c == '\b' || c == '\f' || c == '\n' || c == '\r' || c == '\t') size += 2;
                else if (c < ' ') size += 6;
                else size++;
            }
            return size;
        }

        public static int GetSize(Guid value) => 38;

        public static int GetSize(double value)
        {
#if NETSTANDARD2_1_OR_GREATER || NET6_0_OR_GREATER
            Span<char> buffer = stackalloc char[128];
            if (value.TryFormat(buffer, out int written, "R", global::System.Globalization.CultureInfo.InvariantCulture))
            {
                return written;
            }
#endif
            return value.ToString("R", global::System.Globalization.CultureInfo.InvariantCulture).Length;
        }

        public static int GetSize(float value)
        {
#if NETSTANDARD2_1_OR_GREATER || NET6_0_OR_GREATER
            Span<char> buffer = stackalloc char[128];
            if (value.TryFormat(buffer, out int written, "R", global::System.Globalization.CultureInfo.InvariantCulture))
            {
                return written;
            }
#endif
            return value.ToString("R", global::System.Globalization.CultureInfo.InvariantCulture).Length;
        }

        public static int GetSize(decimal value)
        {
#if NETSTANDARD2_1_OR_GREATER || NET6_0_OR_GREATER
            Span<char> buffer = stackalloc char[128];
            if (value.TryFormat(buffer, out int written, "G", global::System.Globalization.CultureInfo.InvariantCulture))
            {
                return written;
            }
#endif
            return value.ToString("G", global::System.Globalization.CultureInfo.InvariantCulture).Length;
        }

        public static int GetSize(DateTime value)
        {
#if NETSTANDARD2_1_OR_GREATER || NET6_0_OR_GREATER
            Span<char> buffer = stackalloc char[128];
            if (value.TryFormat(buffer, out int written, "O", global::System.Globalization.CultureInfo.InvariantCulture))
            {
                return written + 2;
            }
#endif
            return value.ToString("O", global::System.Globalization.CultureInfo.InvariantCulture).Length + 2;
        }

        public static int GetSize(DateTimeOffset value)
        {
#if NETSTANDARD2_1_OR_GREATER || NET6_0_OR_GREATER
            Span<char> buffer = stackalloc char[128];
            if (value.TryFormat(buffer, out int written, "O", global::System.Globalization.CultureInfo.InvariantCulture))
            {
                return written + 2;
            }
#endif
            return value.ToString("O", global::System.Globalization.CultureInfo.InvariantCulture).Length + 2;
        }

        public static int GetSize(TimeSpan value)
        {
#if NETSTANDARD2_1_OR_GREATER || NET6_0_OR_GREATER
            Span<char> buffer = stackalloc char[128];
            if (value.TryFormat(buffer, out int written, "c", global::System.Globalization.CultureInfo.InvariantCulture))
            {
                return written + 2;
            }
#endif
            return value.ToString("c", global::System.Globalization.CultureInfo.InvariantCulture).Length + 2;
        }



        public static int GetSize(DateOnly value)
        {
#if NETSTANDARD2_1_OR_GREATER || NET6_0_OR_GREATER
            Span<char> buffer = stackalloc char[128];
            if (value.TryFormat(buffer, out int written, "O", global::System.Globalization.CultureInfo.InvariantCulture))
            {
                return written + 2;
            }
#endif
            return value.ToString("O", global::System.Globalization.CultureInfo.InvariantCulture).Length + 2;
        }

        public static int GetSize(TimeOnly value)
        {
#if NETSTANDARD2_1_OR_GREATER || NET6_0_OR_GREATER
            Span<char> buffer = stackalloc char[128];
            if (value.TryFormat(buffer, out int written, "O", global::System.Globalization.CultureInfo.InvariantCulture))
            {
                return written + 2;
            }
#endif
            return value.ToString("O", global::System.Globalization.CultureInfo.InvariantCulture).Length + 2;
        }

        public static int GetSize(Version value)
        {
#if NET6_0_OR_GREATER
            Span<char> buffer = stackalloc char[128];
            if (value.TryFormat(buffer, out int written))
            {
                return written + 2;
            }
#endif
            return value.ToString().Length + 2;
        }
    }
}
  
namespace GenJson.Tests
{
    partial class EmptyClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            if (this.Value is not null)
            {
                propertyCount++;
                size += 8;
                if (this.Value is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.Value.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            if (this.Value is not null)
            {
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "Value");
                span[index++] = ':';
                if (this.Value is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!this.Value.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
            }
            span[index++] = '}';
        }

        public static EmptyClass FromJson(string json)
        {
            if (json is null) throw new System.ArgumentNullException(nameof(json));
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            var result = Parse(span, ref index);
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            if (index != span.Length) throw new System.ArgumentException("Unexpected extra characters", nameof(json));
            return result;
        }

        internal static EmptyClass Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.Expect(json, ref index, '{');
            int? _Value = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == '}')
                {
                    index++;
                    return new EmptyClass
                    {
                        Value = _Value,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Value"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        global::GenJson.GenJsonParser.ParseNull(json, ref index);
                        _Value = null;
                    }
                    else
                    {
                        _Value = global::GenJson.GenJsonParser.ParseInt(json, ref index);
                    }
                    matched = true;
                }
                if (!matched)
                {
                    global::GenJson.GenJsonParser.SkipString(json, ref index);
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    global::GenJson.GenJsonParser.SkipValue(json, ref index);
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == ',')
                {
                    index++;
                }
            }
            throw new System.Exception("Unterminated object at " + index);
        }
    }
}

  
namespace GenJson.Tests
{
    partial class StringClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullablePresent);
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullableNull);
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, this.Present);
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, this.NullablePresent);
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, this.NullableNull);
            }
            span[index++] = '}';
        }

        public static StringClass FromJson(string json)
        {
            if (json is null) throw new System.ArgumentNullException(nameof(json));
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            var result = Parse(span, ref index);
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            if (index != span.Length) throw new System.ArgumentException("Unexpected extra characters", nameof(json));
            return result;
        }

        internal static StringClass Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.Expect(json, ref index, '{');
            string _Present = default;
            string _NullablePresent = default;
            string _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == '}')
                {
                    index++;
                    return new StringClass
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _Present = global::GenJson.GenJsonParser.ParseString(json, ref index);
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _NullablePresent = global::GenJson.GenJsonParser.ParseString(json, ref index);
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _NullableNull = global::GenJson.GenJsonParser.ParseString(json, ref index);
                    matched = true;
                }
                if (!matched)
                {
                    global::GenJson.GenJsonParser.SkipString(json, ref index);
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    global::GenJson.GenJsonParser.SkipValue(json, ref index);
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == ',')
                {
                    index++;
                }
            }
            throw new System.Exception("Unterminated object at " + index);
        }
    }
}

  
namespace GenJson.Tests
{
    partial class IntClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Present);
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                if (this.NullablePresent is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullablePresent.Value);
                }
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                if (this.NullableNull is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize(this.NullableNull.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            { if (!this.Present.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
            { throw new System.Exception("Buffer too small (Primitive)"); }
            index += written;
            }
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                if (this.NullablePresent is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!this.NullablePresent.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                if (this.NullableNull is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!this.NullableNull.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
            }
            span[index++] = '}';
        }

        public static IntClass FromJson(string json)
        {
            if (json is null) throw new System.ArgumentNullException(nameof(json));
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            var result = Parse(span, ref index);
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            if (index != span.Length) throw new System.ArgumentException("Unexpected extra characters", nameof(json));
            return result;
        }

        internal static IntClass Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.Expect(json, ref index, '{');
            int _Present = default;
            int? _NullablePresent = default;
            int? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == '}')
                {
                    index++;
                    return new IntClass
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _Present = global::GenJson.GenJsonParser.ParseInt(json, ref index);
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        global::GenJson.GenJsonParser.ParseNull(json, ref index);
                        _NullablePresent = null;
                    }
                    else
                    {
                        _NullablePresent = global::GenJson.GenJsonParser.ParseInt(json, ref index);
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        global::GenJson.GenJsonParser.ParseNull(json, ref index);
                        _NullableNull = null;
                    }
                    else
                    {
                        _NullableNull = global::GenJson.GenJsonParser.ParseInt(json, ref index);
                    }
                    matched = true;
                }
                if (!matched)
                {
                    global::GenJson.GenJsonParser.SkipString(json, ref index);
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    global::GenJson.GenJsonParser.SkipValue(json, ref index);
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == ',')
                {
                    index++;
                }
            }
            throw new System.Exception("Unterminated object at " + index);
        }
    }
}

  
namespace GenJson.Tests
{
    partial class IntEnumClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 16;
            size += global::GenJson.GenJsonSizeHelper.GetSize((int)this.PresentNumber);
            propertyCount++;
            size += 14;
            size += this.PresentText.ToString().Length + 2;
            propertyCount++;
            size += 24;
            size += global::GenJson.GenJsonSizeHelper.GetSize((int)this.NullablePresentNumber);
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                if (this.NullableNull is null)
                {
                    size += 4;
                }
                else
                {
                    size += global::GenJson.GenJsonSizeHelper.GetSize((int)this.NullableNull.Value);
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "PresentNumber");
            span[index++] = ':';
            { if (!((int)this.PresentNumber).TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture)) throw new System.Exception("Buffer too small"); index += written; }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "PresentText");
            span[index++] = ':';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, this.PresentText.ToString());
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresentNumber");
            span[index++] = ':';
            { if (!((int)this.NullablePresentNumber).TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture)) throw new System.Exception("Buffer too small"); index += written; }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                if (this.NullableNull is null)
                {
                    span[index++] = 'n'; span[index++] = 'u'; span[index++] = 'l'; span[index++] = 'l';
                }
                else
                {
                    { if (!((int)this.NullableNull.Value).TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture)) throw new System.Exception("Buffer too small"); index += written; }
                }
            }
            span[index++] = '}';
        }

        public static IntEnumClass FromJson(string json)
        {
            if (json is null) throw new System.ArgumentNullException(nameof(json));
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            var result = Parse(span, ref index);
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            if (index != span.Length) throw new System.ArgumentException("Unexpected extra characters", nameof(json));
            return result;
        }

        internal static IntEnumClass Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.Expect(json, ref index, '{');
            global::GenJson.Tests.IntEnum _PresentNumber = default;
            global::GenJson.Tests.IntEnum _PresentText = default;
            global::GenJson.Tests.IntEnum _NullablePresentNumber = default;
            global::GenJson.Tests.IntEnum? _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == '}')
                {
                    index++;
                    return new IntEnumClass
                    {
                        PresentNumber = _PresentNumber,
                        PresentText = _PresentText,
                        NullablePresentNumber = _NullablePresentNumber,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "PresentNumber"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _PresentNumber = (global::GenJson.Tests.IntEnum)global::GenJson.GenJsonParser.ParseInt(json, ref index);
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "PresentText"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _PresentText = System.Enum.Parse<global::GenJson.Tests.IntEnum>(global::GenJson.GenJsonParser.ParseString(json, ref index));
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresentNumber"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _NullablePresentNumber = (global::GenJson.Tests.IntEnum)global::GenJson.GenJsonParser.ParseInt(json, ref index);
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    if (global::GenJson.GenJsonParser.IsNull(json, ref index))
                    {
                        global::GenJson.GenJsonParser.ParseNull(json, ref index);
                        _NullableNull = null;
                    }
                    else
                    {
                        _NullableNull = (global::GenJson.Tests.IntEnum)global::GenJson.GenJsonParser.ParseInt(json, ref index);
                    }
                    matched = true;
                }
                if (!matched)
                {
                    global::GenJson.GenJsonParser.SkipString(json, ref index);
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    global::GenJson.GenJsonParser.SkipValue(json, ref index);
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == ',')
                {
                    index++;
                }
            }
            throw new System.Exception("Unterminated object at " + index);
        }
    }
}

  
namespace GenJson.Tests
{
    partial class ByteEnumClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize((byte)this.Present);
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            { if (!((byte)this.Present).TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture)) throw new System.Exception("Buffer too small"); index += written; }
            span[index++] = '}';
        }

        public static ByteEnumClass FromJson(string json)
        {
            if (json is null) throw new System.ArgumentNullException(nameof(json));
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            var result = Parse(span, ref index);
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            if (index != span.Length) throw new System.ArgumentException("Unexpected extra characters", nameof(json));
            return result;
        }

        internal static ByteEnumClass Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.Expect(json, ref index, '{');
            global::GenJson.Tests.ByteEnum _Present = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == '}')
                {
                    index++;
                    return new ByteEnumClass
                    {
                        Present = _Present,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _Present = (global::GenJson.Tests.ByteEnum)global::GenJson.GenJsonParser.ParseByte(json, ref index);
                    matched = true;
                }
                if (!matched)
                {
                    global::GenJson.GenJsonParser.SkipString(json, ref index);
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    global::GenJson.GenJsonParser.SkipValue(json, ref index);
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == ',')
                {
                    index++;
                }
            }
            throw new System.Exception("Unterminated object at " + index);
        }
    }
}

  
namespace GenJson.Tests
{
    partial class ParentClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            size += this.Present.CalculateJsonSize();
            if (this.NullablePresent is not null)
            {
                propertyCount++;
                size += 18;
                size += this.NullablePresent.CalculateJsonSize();
            }
            if (this.NullableNull is not null)
            {
                propertyCount++;
                size += 15;
                size += this.NullableNull.CalculateJsonSize();
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            this.Present.WriteJson(span, ref index);
            if (this.NullablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullablePresent");
                span[index++] = ':';
                this.NullablePresent.WriteJson(span, ref index);
            }
            if (this.NullableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableNull");
                span[index++] = ':';
                this.NullableNull.WriteJson(span, ref index);
            }
            span[index++] = '}';
        }

        public static ParentClass FromJson(string json)
        {
            if (json is null) throw new System.ArgumentNullException(nameof(json));
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            var result = Parse(span, ref index);
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            if (index != span.Length) throw new System.ArgumentException("Unexpected extra characters", nameof(json));
            return result;
        }

        internal static ParentClass Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.Expect(json, ref index, '{');
            global::GenJson.Tests.EmptyClass _Present = default;
            global::GenJson.Tests.EmptyClass _NullablePresent = default;
            global::GenJson.Tests.EmptyClass _NullableNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == '}')
                {
                    index++;
                    return new ParentClass
                    {
                        Present = _Present,
                        NullablePresent = _NullablePresent,
                        NullableNull = _NullableNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _Present = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullablePresent"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _NullablePresent = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableNull"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _NullableNull = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                    matched = true;
                }
                if (!matched)
                {
                    global::GenJson.GenJsonParser.SkipString(json, ref index);
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    global::GenJson.GenJsonParser.SkipValue(json, ref index);
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == ',')
                {
                    index++;
                }
            }
            throw new System.Exception("Unterminated object at " + index);
        }
    }
}

  
namespace GenJson.Tests
{
    partial class EnumerableIntClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 20;
            {
                size += 2;
                int count0 = 0;
                foreach (var item0 in this.EnumerablePresent)
                {
                    count0++;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                }
                if (count0 > 1) size += count0 - 1;
            }
            propertyCount++;
            size += 15;
            {
                size += 2;
                int count0 = 0;
                foreach (var item0 in this.ArrayPresent)
                {
                    count0++;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                }
                if (count0 > 1) size += count0 - 1;
            }
            propertyCount++;
            size += 14;
            {
                size += 2;
                int count0 = 0;
                foreach (var item0 in this.ListPresent)
                {
                    count0++;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                }
                if (count0 > 1) size += count0 - 1;
            }
            if (this.NullableEnumerablePresent is not null)
            {
                propertyCount++;
                size += 28;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableEnumerablePresent)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableArrayPresent is not null)
            {
                propertyCount++;
                size += 23;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableArrayPresent)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableListPresent is not null)
            {
                propertyCount++;
                size += 22;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableListPresent)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableEnumerableNull is not null)
            {
                propertyCount++;
                size += 25;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableEnumerableNull)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableArrayNull is not null)
            {
                propertyCount++;
                size += 20;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableArrayNull)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableListNull is not null)
            {
                propertyCount++;
                size += 19;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableListNull)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "EnumerablePresent");
            span[index++] = ':';
            {
                span[index++] = '[';
                bool firstItem0 = true;
                foreach (var item0 in this.EnumerablePresent)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    { if (!item0.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
                span[index++] = ']';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "ArrayPresent");
            span[index++] = ':';
            {
                span[index++] = '[';
                bool firstItem0 = true;
                foreach (var item0 in this.ArrayPresent)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    { if (!item0.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
                span[index++] = ']';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "ListPresent");
            span[index++] = ':';
            {
                span[index++] = '[';
                bool firstItem0 = true;
                foreach (var item0 in this.ListPresent)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    { if (!item0.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
                span[index++] = ']';
            }
            if (this.NullableEnumerablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableEnumerablePresent");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableEnumerablePresent)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        { if (!item0.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                        { throw new System.Exception("Buffer too small (Primitive)"); }
                        index += written;
                        }
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableArrayPresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableArrayPresent");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableArrayPresent)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        { if (!item0.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                        { throw new System.Exception("Buffer too small (Primitive)"); }
                        index += written;
                        }
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableListPresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableListPresent");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableListPresent)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        { if (!item0.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                        { throw new System.Exception("Buffer too small (Primitive)"); }
                        index += written;
                        }
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableEnumerableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableEnumerableNull");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableEnumerableNull)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        { if (!item0.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                        { throw new System.Exception("Buffer too small (Primitive)"); }
                        index += written;
                        }
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableArrayNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableArrayNull");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableArrayNull)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        { if (!item0.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                        { throw new System.Exception("Buffer too small (Primitive)"); }
                        index += written;
                        }
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableListNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableListNull");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableListNull)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        { if (!item0.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                        { throw new System.Exception("Buffer too small (Primitive)"); }
                        index += written;
                        }
                    }
                    span[index++] = ']';
                }
            }
            span[index++] = '}';
        }

        public static EnumerableIntClass FromJson(string json)
        {
            if (json is null) throw new System.ArgumentNullException(nameof(json));
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            var result = Parse(span, ref index);
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            if (index != span.Length) throw new System.ArgumentException("Unexpected extra characters", nameof(json));
            return result;
        }

        internal static EnumerableIntClass Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.Expect(json, ref index, '{');
            global::System.Collections.Generic.IEnumerable<int> _EnumerablePresent = default;
            int[] _ArrayPresent = default;
            global::System.Collections.Generic.List<int> _ListPresent = default;
            global::System.Collections.Generic.IEnumerable<int> _NullableEnumerablePresent = default;
            int[] _NullableArrayPresent = default;
            global::System.Collections.Generic.List<int> _NullableListPresent = default;
            global::System.Collections.Generic.IEnumerable<int> _NullableEnumerableNull = default;
            int[] _NullableArrayNull = default;
            global::System.Collections.Generic.List<int> _NullableListNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == '}')
                {
                    index++;
                    return new EnumerableIntClass
                    {
                        EnumerablePresent = _EnumerablePresent,
                        ArrayPresent = _ArrayPresent,
                        ListPresent = _ListPresent,
                        NullableEnumerablePresent = _NullableEnumerablePresent,
                        NullableArrayPresent = _NullableArrayPresent,
                        NullableListPresent = _NullableListPresent,
                        NullableEnumerableNull = _NullableEnumerableNull,
                        NullableArrayNull = _NullableArrayNull,
                        NullableListNull = _NullableListNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "EnumerablePresent"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<int>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _EnumerablePresent = list0;
                                break;
                            }
                            int item0 = default;
                            item0 = global::GenJson.GenJsonParser.ParseInt(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "ArrayPresent"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<int>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _ArrayPresent = list0.ToArray();
                                break;
                            }
                            int item0 = default;
                            item0 = global::GenJson.GenJsonParser.ParseInt(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "ListPresent"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<int>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _ListPresent = list0;
                                break;
                            }
                            int item0 = default;
                            item0 = global::GenJson.GenJsonParser.ParseInt(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableEnumerablePresent"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<int>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableEnumerablePresent = list0;
                                break;
                            }
                            int item0 = default;
                            item0 = global::GenJson.GenJsonParser.ParseInt(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableArrayPresent"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<int>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableArrayPresent = list0.ToArray();
                                break;
                            }
                            int item0 = default;
                            item0 = global::GenJson.GenJsonParser.ParseInt(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableListPresent"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<int>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableListPresent = list0;
                                break;
                            }
                            int item0 = default;
                            item0 = global::GenJson.GenJsonParser.ParseInt(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableEnumerableNull"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<int>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableEnumerableNull = list0;
                                break;
                            }
                            int item0 = default;
                            item0 = global::GenJson.GenJsonParser.ParseInt(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableArrayNull"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<int>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableArrayNull = list0.ToArray();
                                break;
                            }
                            int item0 = default;
                            item0 = global::GenJson.GenJsonParser.ParseInt(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableListNull"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<int>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableListNull = list0;
                                break;
                            }
                            int item0 = default;
                            item0 = global::GenJson.GenJsonParser.ParseInt(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                if (!matched)
                {
                    global::GenJson.GenJsonParser.SkipString(json, ref index);
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    global::GenJson.GenJsonParser.SkipValue(json, ref index);
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == ',')
                {
                    index++;
                }
            }
            throw new System.Exception("Unterminated object at " + index);
        }
    }
}

  
namespace GenJson.Tests
{
    partial class EnumerableStringClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 20;
            {
                size += 2;
                int count0 = 0;
                foreach (var item0 in this.EnumerablePresent)
                {
                    count0++;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                }
                if (count0 > 1) size += count0 - 1;
            }
            propertyCount++;
            size += 15;
            {
                size += 2;
                int count0 = 0;
                foreach (var item0 in this.ArrayPresent)
                {
                    count0++;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                }
                if (count0 > 1) size += count0 - 1;
            }
            propertyCount++;
            size += 14;
            {
                size += 2;
                int count0 = 0;
                foreach (var item0 in this.ListPresent)
                {
                    count0++;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                }
                if (count0 > 1) size += count0 - 1;
            }
            if (this.NullableEnumerablePresent is not null)
            {
                propertyCount++;
                size += 28;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableEnumerablePresent)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableArrayPresent is not null)
            {
                propertyCount++;
                size += 23;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableArrayPresent)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableListPresent is not null)
            {
                propertyCount++;
                size += 22;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableListPresent)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableEnumerableNull is not null)
            {
                propertyCount++;
                size += 25;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableEnumerableNull)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableArrayNull is not null)
            {
                propertyCount++;
                size += 20;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableArrayNull)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableListNull is not null)
            {
                propertyCount++;
                size += 19;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableListNull)
                    {
                        count0++;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(item0);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "EnumerablePresent");
            span[index++] = ':';
            {
                span[index++] = '[';
                bool firstItem0 = true;
                foreach (var item0 in this.EnumerablePresent)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    global::GenJson.GenJsonWriter.WriteString(span, ref index, item0);
                }
                span[index++] = ']';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "ArrayPresent");
            span[index++] = ':';
            {
                span[index++] = '[';
                bool firstItem0 = true;
                foreach (var item0 in this.ArrayPresent)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    global::GenJson.GenJsonWriter.WriteString(span, ref index, item0);
                }
                span[index++] = ']';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "ListPresent");
            span[index++] = ':';
            {
                span[index++] = '[';
                bool firstItem0 = true;
                foreach (var item0 in this.ListPresent)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    global::GenJson.GenJsonWriter.WriteString(span, ref index, item0);
                }
                span[index++] = ']';
            }
            if (this.NullableEnumerablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableEnumerablePresent");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableEnumerablePresent)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        global::GenJson.GenJsonWriter.WriteString(span, ref index, item0);
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableArrayPresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableArrayPresent");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableArrayPresent)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        global::GenJson.GenJsonWriter.WriteString(span, ref index, item0);
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableListPresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableListPresent");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableListPresent)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        global::GenJson.GenJsonWriter.WriteString(span, ref index, item0);
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableEnumerableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableEnumerableNull");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableEnumerableNull)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        global::GenJson.GenJsonWriter.WriteString(span, ref index, item0);
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableArrayNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableArrayNull");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableArrayNull)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        global::GenJson.GenJsonWriter.WriteString(span, ref index, item0);
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableListNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableListNull");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableListNull)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        global::GenJson.GenJsonWriter.WriteString(span, ref index, item0);
                    }
                    span[index++] = ']';
                }
            }
            span[index++] = '}';
        }

        public static EnumerableStringClass FromJson(string json)
        {
            if (json is null) throw new System.ArgumentNullException(nameof(json));
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            var result = Parse(span, ref index);
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            if (index != span.Length) throw new System.ArgumentException("Unexpected extra characters", nameof(json));
            return result;
        }

        internal static EnumerableStringClass Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.Expect(json, ref index, '{');
            global::System.Collections.Generic.IEnumerable<string> _EnumerablePresent = default;
            string[] _ArrayPresent = default;
            global::System.Collections.Generic.List<string> _ListPresent = default;
            global::System.Collections.Generic.IEnumerable<string> _NullableEnumerablePresent = default;
            string[] _NullableArrayPresent = default;
            global::System.Collections.Generic.List<string> _NullableListPresent = default;
            global::System.Collections.Generic.IEnumerable<string> _NullableEnumerableNull = default;
            string[] _NullableArrayNull = default;
            global::System.Collections.Generic.List<string> _NullableListNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == '}')
                {
                    index++;
                    return new EnumerableStringClass
                    {
                        EnumerablePresent = _EnumerablePresent,
                        ArrayPresent = _ArrayPresent,
                        ListPresent = _ListPresent,
                        NullableEnumerablePresent = _NullableEnumerablePresent,
                        NullableArrayPresent = _NullableArrayPresent,
                        NullableListPresent = _NullableListPresent,
                        NullableEnumerableNull = _NullableEnumerableNull,
                        NullableArrayNull = _NullableArrayNull,
                        NullableListNull = _NullableListNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "EnumerablePresent"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<string>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _EnumerablePresent = list0;
                                break;
                            }
                            string item0 = default;
                            item0 = global::GenJson.GenJsonParser.ParseString(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "ArrayPresent"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<string>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _ArrayPresent = list0.ToArray();
                                break;
                            }
                            string item0 = default;
                            item0 = global::GenJson.GenJsonParser.ParseString(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "ListPresent"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<string>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _ListPresent = list0;
                                break;
                            }
                            string item0 = default;
                            item0 = global::GenJson.GenJsonParser.ParseString(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableEnumerablePresent"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<string>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableEnumerablePresent = list0;
                                break;
                            }
                            string item0 = default;
                            item0 = global::GenJson.GenJsonParser.ParseString(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableArrayPresent"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<string>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableArrayPresent = list0.ToArray();
                                break;
                            }
                            string item0 = default;
                            item0 = global::GenJson.GenJsonParser.ParseString(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableListPresent"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<string>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableListPresent = list0;
                                break;
                            }
                            string item0 = default;
                            item0 = global::GenJson.GenJsonParser.ParseString(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableEnumerableNull"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<string>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableEnumerableNull = list0;
                                break;
                            }
                            string item0 = default;
                            item0 = global::GenJson.GenJsonParser.ParseString(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableArrayNull"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<string>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableArrayNull = list0.ToArray();
                                break;
                            }
                            string item0 = default;
                            item0 = global::GenJson.GenJsonParser.ParseString(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableListNull"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<string>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableListNull = list0;
                                break;
                            }
                            string item0 = default;
                            item0 = global::GenJson.GenJsonParser.ParseString(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                if (!matched)
                {
                    global::GenJson.GenJsonParser.SkipString(json, ref index);
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    global::GenJson.GenJsonParser.SkipValue(json, ref index);
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == ',')
                {
                    index++;
                }
            }
            throw new System.Exception("Unterminated object at " + index);
        }
    }
}

  
namespace GenJson.Tests
{
    partial class EnumerableParentClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 20;
            {
                size += 2;
                int count0 = 0;
                foreach (var item0 in this.EnumerablePresent)
                {
                    count0++;
                    size += item0.CalculateJsonSize();
                }
                if (count0 > 1) size += count0 - 1;
            }
            propertyCount++;
            size += 15;
            {
                size += 2;
                int count0 = 0;
                foreach (var item0 in this.ArrayPresent)
                {
                    count0++;
                    size += item0.CalculateJsonSize();
                }
                if (count0 > 1) size += count0 - 1;
            }
            propertyCount++;
            size += 14;
            {
                size += 2;
                int count0 = 0;
                foreach (var item0 in this.ListPresent)
                {
                    count0++;
                    size += item0.CalculateJsonSize();
                }
                if (count0 > 1) size += count0 - 1;
            }
            if (this.NullableEnumerablePresent is not null)
            {
                propertyCount++;
                size += 28;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableEnumerablePresent)
                    {
                        count0++;
                        size += item0.CalculateJsonSize();
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableArrayPresent is not null)
            {
                propertyCount++;
                size += 23;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableArrayPresent)
                    {
                        count0++;
                        size += item0.CalculateJsonSize();
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableListPresent is not null)
            {
                propertyCount++;
                size += 22;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableListPresent)
                    {
                        count0++;
                        size += item0.CalculateJsonSize();
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableEnumerableNull is not null)
            {
                propertyCount++;
                size += 25;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableEnumerableNull)
                    {
                        count0++;
                        size += item0.CalculateJsonSize();
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableArrayNull is not null)
            {
                propertyCount++;
                size += 20;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableArrayNull)
                    {
                        count0++;
                        size += item0.CalculateJsonSize();
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (this.NullableListNull is not null)
            {
                propertyCount++;
                size += 19;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var item0 in this.NullableListNull)
                    {
                        count0++;
                        size += item0.CalculateJsonSize();
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "EnumerablePresent");
            span[index++] = ':';
            {
                span[index++] = '[';
                bool firstItem0 = true;
                foreach (var item0 in this.EnumerablePresent)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    item0.WriteJson(span, ref index);
                }
                span[index++] = ']';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "ArrayPresent");
            span[index++] = ':';
            {
                span[index++] = '[';
                bool firstItem0 = true;
                foreach (var item0 in this.ArrayPresent)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    item0.WriteJson(span, ref index);
                }
                span[index++] = ']';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "ListPresent");
            span[index++] = ':';
            {
                span[index++] = '[';
                bool firstItem0 = true;
                foreach (var item0 in this.ListPresent)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    item0.WriteJson(span, ref index);
                }
                span[index++] = ']';
            }
            if (this.NullableEnumerablePresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableEnumerablePresent");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableEnumerablePresent)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        item0.WriteJson(span, ref index);
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableArrayPresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableArrayPresent");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableArrayPresent)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        item0.WriteJson(span, ref index);
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableListPresent is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableListPresent");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableListPresent)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        item0.WriteJson(span, ref index);
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableEnumerableNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableEnumerableNull");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableEnumerableNull)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        item0.WriteJson(span, ref index);
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableArrayNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableArrayNull");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableArrayNull)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        item0.WriteJson(span, ref index);
                    }
                    span[index++] = ']';
                }
            }
            if (this.NullableListNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableListNull");
                span[index++] = ':';
                {
                    span[index++] = '[';
                    bool firstItem0 = true;
                    foreach (var item0 in this.NullableListNull)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        item0.WriteJson(span, ref index);
                    }
                    span[index++] = ']';
                }
            }
            span[index++] = '}';
        }

        public static EnumerableParentClass FromJson(string json)
        {
            if (json is null) throw new System.ArgumentNullException(nameof(json));
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            var result = Parse(span, ref index);
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            if (index != span.Length) throw new System.ArgumentException("Unexpected extra characters", nameof(json));
            return result;
        }

        internal static EnumerableParentClass Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.Expect(json, ref index, '{');
            global::System.Collections.Generic.IEnumerable<global::GenJson.Tests.EmptyClass> _EnumerablePresent = default;
            global::GenJson.Tests.EmptyClass[] _ArrayPresent = default;
            global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass> _ListPresent = default;
            global::System.Collections.Generic.IEnumerable<global::GenJson.Tests.EmptyClass> _NullableEnumerablePresent = default;
            global::GenJson.Tests.EmptyClass[] _NullableArrayPresent = default;
            global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass> _NullableListPresent = default;
            global::System.Collections.Generic.IEnumerable<global::GenJson.Tests.EmptyClass> _NullableEnumerableNull = default;
            global::GenJson.Tests.EmptyClass[] _NullableArrayNull = default;
            global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass> _NullableListNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == '}')
                {
                    index++;
                    return new EnumerableParentClass
                    {
                        EnumerablePresent = _EnumerablePresent,
                        ArrayPresent = _ArrayPresent,
                        ListPresent = _ListPresent,
                        NullableEnumerablePresent = _NullableEnumerablePresent,
                        NullableArrayPresent = _NullableArrayPresent,
                        NullableListPresent = _NullableListPresent,
                        NullableEnumerableNull = _NullableEnumerableNull,
                        NullableArrayNull = _NullableArrayNull,
                        NullableListNull = _NullableListNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "EnumerablePresent"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _EnumerablePresent = list0;
                                break;
                            }
                            global::GenJson.Tests.EmptyClass item0 = default;
                            item0 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "ArrayPresent"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _ArrayPresent = list0.ToArray();
                                break;
                            }
                            global::GenJson.Tests.EmptyClass item0 = default;
                            item0 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "ListPresent"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _ListPresent = list0;
                                break;
                            }
                            global::GenJson.Tests.EmptyClass item0 = default;
                            item0 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableEnumerablePresent"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableEnumerablePresent = list0;
                                break;
                            }
                            global::GenJson.Tests.EmptyClass item0 = default;
                            item0 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableArrayPresent"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableArrayPresent = list0.ToArray();
                                break;
                            }
                            global::GenJson.Tests.EmptyClass item0 = default;
                            item0 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableListPresent"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableListPresent = list0;
                                break;
                            }
                            global::GenJson.Tests.EmptyClass item0 = default;
                            item0 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableEnumerableNull"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableEnumerableNull = list0;
                                break;
                            }
                            global::GenJson.Tests.EmptyClass item0 = default;
                            item0 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableArrayNull"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableArrayNull = list0.ToArray();
                                break;
                            }
                            global::GenJson.Tests.EmptyClass item0 = default;
                            item0 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableListNull"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _NullableListNull = list0;
                                break;
                            }
                            global::GenJson.Tests.EmptyClass item0 = default;
                            item0 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                if (!matched)
                {
                    global::GenJson.GenJsonParser.SkipString(json, ref index);
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    global::GenJson.GenJsonParser.SkipValue(json, ref index);
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == ',')
                {
                    index++;
                }
            }
            throw new System.Exception("Unterminated object at " + index);
        }
    }
}

  
namespace GenJson.Tests
{
    partial class NestedEnumerableClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 20;
            {
                size += 2;
                int count0 = 0;
                foreach (var item0 in this.EnumerablePresent)
                {
                    count0++;
                    {
                        size += 2;
                        int count1 = 0;
                        foreach (var item1 in item0)
                        {
                            count1++;
                            size += item1.CalculateJsonSize();
                        }
                        if (count1 > 1) size += count1 - 1;
                    }
                }
                if (count0 > 1) size += count0 - 1;
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "EnumerablePresent");
            span[index++] = ':';
            {
                span[index++] = '[';
                bool firstItem0 = true;
                foreach (var item0 in this.EnumerablePresent)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    {
                        span[index++] = '[';
                        bool firstItem1 = true;
                        foreach (var item1 in item0)
                        {
                            if (!firstItem1)
                            {
                                span[index++] = ',';
                            }
                            firstItem1 = false;
                            item1.WriteJson(span, ref index);
                        }
                        span[index++] = ']';
                    }
                }
                span[index++] = ']';
            }
            span[index++] = '}';
        }

        public static NestedEnumerableClass FromJson(string json)
        {
            if (json is null) throw new System.ArgumentNullException(nameof(json));
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            var result = Parse(span, ref index);
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            if (index != span.Length) throw new System.ArgumentException("Unexpected extra characters", nameof(json));
            return result;
        }

        internal static NestedEnumerableClass Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.Expect(json, ref index, '{');
            global::GenJson.Tests.EmptyClass[][] _EnumerablePresent = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == '}')
                {
                    index++;
                    return new NestedEnumerableClass
                    {
                        EnumerablePresent = _EnumerablePresent,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "EnumerablePresent"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var list0 = new global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass[]>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ']')
                            {
                                index++;
                                _EnumerablePresent = list0.ToArray();
                                break;
                            }
                            global::GenJson.Tests.EmptyClass[] item0 = default;
                            {
                                var list1 = new global::System.Collections.Generic.List<global::GenJson.Tests.EmptyClass>();
                                global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                                while (index < json.Length)
                                {
                                    global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                                    if (json[index] == ']')
                                    {
                                        index++;
                                        item0 = list1.ToArray();
                                        break;
                                    }
                                    global::GenJson.Tests.EmptyClass item1 = default;
                                    item1 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                                    list1.Add(item1);
                                    global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                                    if (json[index] == ',')
                                    {
                                        index++;
                                    }
                                }
                            }
                            list0.Add(item0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                if (!matched)
                {
                    global::GenJson.GenJsonParser.SkipString(json, ref index);
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    global::GenJson.GenJsonParser.SkipValue(json, ref index);
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == ',')
                {
                    index++;
                }
            }
            throw new System.Exception("Unterminated object at " + index);
        }
    }
}

  
namespace GenJson.Tests
{
    partial class DictionaryClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 16;
            {
                size += 2;
                int count0 = 0;
                foreach (var kvp0 in this.PresentIntInt)
                {
                    count0++;
                    size += 3;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(kvp0.Key);
                    size += global::GenJson.GenJsonSizeHelper.GetSize(kvp0.Value);
                }
                if (count0 > 1) size += count0 - 1;
            }
            propertyCount++;
            size += 19;
            {
                size += 2;
                int count0 = 0;
                foreach (var kvp0 in this.PresentIntString)
                {
                    count0++;
                    size += 3;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(kvp0.Key);
                    size += global::GenJson.GenJsonSizeHelper.GetSize(kvp0.Value);
                }
                if (count0 > 1) size += count0 - 1;
            }
            propertyCount++;
            size += 19;
            {
                size += 2;
                int count0 = 0;
                foreach (var kvp0 in this.PresentStringInt)
                {
                    count0++;
                    size += 3;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(kvp0.Key) - 2;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(kvp0.Value);
                }
                if (count0 > 1) size += count0 - 1;
            }
            propertyCount++;
            size += 26;
            {
                size += 2;
                int count0 = 0;
                foreach (var kvp0 in this.PresentIntEnumerableInt)
                {
                    count0++;
                    size += 3;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(kvp0.Key);
                    {
                        size += 2;
                        int count1 = 0;
                        foreach (var item1 in kvp0.Value)
                        {
                            count1++;
                            size += global::GenJson.GenJsonSizeHelper.GetSize(item1);
                        }
                        if (count1 > 1) size += count1 - 1;
                    }
                }
                if (count0 > 1) size += count0 - 1;
            }
            propertyCount++;
            size += 35;
            {
                size += 2;
                int count0 = 0;
                foreach (var kvp0 in this.PresentDictionaryIntEmptyClasses)
                {
                    count0++;
                    size += 3;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(kvp0.Key);
                    size += kvp0.Value.CalculateJsonSize();
                }
                if (count0 > 1) size += count0 - 1;
            }
            if (this.NullableDictionaryIntIntNull is not null)
            {
                propertyCount++;
                size += 31;
                {
                    size += 2;
                    int count0 = 0;
                    foreach (var kvp0 in this.NullableDictionaryIntIntNull)
                    {
                        count0++;
                        size += 3;
                        size += global::GenJson.GenJsonSizeHelper.GetSize(kvp0.Key);
                        size += global::GenJson.GenJsonSizeHelper.GetSize(kvp0.Value);
                    }
                    if (count0 > 1) size += count0 - 1;
                }
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "PresentIntInt");
            span[index++] = ':';
            {
                span[index++] = '{';
                bool firstItem0 = true;
                foreach (var kvp0 in this.PresentIntInt)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    global::GenJson.GenJsonWriter.WriteString(span, ref index, kvp0.Key.ToString());
                    span[index++] = ':';
                    { if (!kvp0.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
                span[index++] = '}';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "PresentIntString");
            span[index++] = ':';
            {
                span[index++] = '{';
                bool firstItem0 = true;
                foreach (var kvp0 in this.PresentIntString)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    global::GenJson.GenJsonWriter.WriteString(span, ref index, kvp0.Key.ToString());
                    span[index++] = ':';
                    global::GenJson.GenJsonWriter.WriteString(span, ref index, kvp0.Value);
                }
                span[index++] = '}';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "PresentStringInt");
            span[index++] = ':';
            {
                span[index++] = '{';
                bool firstItem0 = true;
                foreach (var kvp0 in this.PresentStringInt)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    global::GenJson.GenJsonWriter.WriteString(span, ref index, kvp0.Key.ToString());
                    span[index++] = ':';
                    { if (!kvp0.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                    { throw new System.Exception("Buffer too small (Primitive)"); }
                    index += written;
                    }
                }
                span[index++] = '}';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "PresentIntEnumerableInt");
            span[index++] = ':';
            {
                span[index++] = '{';
                bool firstItem0 = true;
                foreach (var kvp0 in this.PresentIntEnumerableInt)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    global::GenJson.GenJsonWriter.WriteString(span, ref index, kvp0.Key.ToString());
                    span[index++] = ':';
                    {
                        span[index++] = '[';
                        bool firstItem1 = true;
                        foreach (var item1 in kvp0.Value)
                        {
                            if (!firstItem1)
                            {
                                span[index++] = ',';
                            }
                            firstItem1 = false;
                            { if (!item1.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                            { throw new System.Exception("Buffer too small (Primitive)"); }
                            index += written;
                            }
                        }
                        span[index++] = ']';
                    }
                }
                span[index++] = '}';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "PresentDictionaryIntEmptyClasses");
            span[index++] = ':';
            {
                span[index++] = '{';
                bool firstItem0 = true;
                foreach (var kvp0 in this.PresentDictionaryIntEmptyClasses)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    global::GenJson.GenJsonWriter.WriteString(span, ref index, kvp0.Key.ToString());
                    span[index++] = ':';
                    kvp0.Value.WriteJson(span, ref index);
                }
                span[index++] = '}';
            }
            if (this.NullableDictionaryIntIntNull is not null)
            {
                span[index++] = ',';
                global::GenJson.GenJsonWriter.WriteString(span, ref index, "NullableDictionaryIntIntNull");
                span[index++] = ':';
                {
                    span[index++] = '{';
                    bool firstItem0 = true;
                    foreach (var kvp0 in this.NullableDictionaryIntIntNull)
                    {
                        if (!firstItem0)
                        {
                            span[index++] = ',';
                        }
                        firstItem0 = false;
                        global::GenJson.GenJsonWriter.WriteString(span, ref index, kvp0.Key.ToString());
                        span[index++] = ':';
                        { if (!kvp0.Value.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
                        { throw new System.Exception("Buffer too small (Primitive)"); }
                        index += written;
                        }
                    }
                    span[index++] = '}';
                }
            }
            span[index++] = '}';
        }

        public static DictionaryClass FromJson(string json)
        {
            if (json is null) throw new System.ArgumentNullException(nameof(json));
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            var result = Parse(span, ref index);
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            if (index != span.Length) throw new System.ArgumentException("Unexpected extra characters", nameof(json));
            return result;
        }

        internal static DictionaryClass Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.Expect(json, ref index, '{');
            global::System.Collections.Generic.IReadOnlyDictionary<int, int> _PresentIntInt = default;
            global::System.Collections.Generic.IReadOnlyDictionary<int, string> _PresentIntString = default;
            global::System.Collections.Generic.IReadOnlyDictionary<string, int> _PresentStringInt = default;
            global::System.Collections.Generic.IReadOnlyDictionary<int, global::System.Collections.Generic.IEnumerable<int>> _PresentIntEnumerableInt = default;
            global::System.Collections.Generic.IReadOnlyDictionary<int, global::GenJson.Tests.EmptyClass> _PresentDictionaryIntEmptyClasses = default;
            global::System.Collections.Generic.IReadOnlyDictionary<int, int> _NullableDictionaryIntIntNull = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == '}')
                {
                    index++;
                    return new DictionaryClass
                    {
                        PresentIntInt = _PresentIntInt,
                        PresentIntString = _PresentIntString,
                        PresentStringInt = _PresentStringInt,
                        PresentIntEnumerableInt = _PresentIntEnumerableInt,
                        PresentDictionaryIntEmptyClasses = _PresentDictionaryIntEmptyClasses,
                        NullableDictionaryIntIntNull = _NullableDictionaryIntIntNull,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "PresentIntInt"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var dict0 = new global::System.Collections.Generic.Dictionary<int, int>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '{');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == '}')
                            {
                                index++;
                                _PresentIntInt = dict0;
                                break;
                            }
                            var keyStr0 = global::GenJson.GenJsonParser.ParseString(json, ref index);
                            global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                            int key0 = int.Parse(keyStr0);
                            int val0 = default;
                            val0 = global::GenJson.GenJsonParser.ParseInt(json, ref index);
                            dict0.Add(key0, val0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "PresentIntString"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var dict0 = new global::System.Collections.Generic.Dictionary<int, string>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '{');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == '}')
                            {
                                index++;
                                _PresentIntString = dict0;
                                break;
                            }
                            var keyStr0 = global::GenJson.GenJsonParser.ParseString(json, ref index);
                            global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                            int key0 = int.Parse(keyStr0);
                            string val0 = default;
                            val0 = global::GenJson.GenJsonParser.ParseString(json, ref index);
                            dict0.Add(key0, val0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "PresentStringInt"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var dict0 = new global::System.Collections.Generic.Dictionary<string, int>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '{');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == '}')
                            {
                                index++;
                                _PresentStringInt = dict0;
                                break;
                            }
                            var keyStr0 = global::GenJson.GenJsonParser.ParseString(json, ref index);
                            global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                            string key0 = keyStr0;
                            int val0 = default;
                            val0 = global::GenJson.GenJsonParser.ParseInt(json, ref index);
                            dict0.Add(key0, val0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "PresentIntEnumerableInt"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var dict0 = new global::System.Collections.Generic.Dictionary<int, global::System.Collections.Generic.IEnumerable<int>>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '{');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == '}')
                            {
                                index++;
                                _PresentIntEnumerableInt = dict0;
                                break;
                            }
                            var keyStr0 = global::GenJson.GenJsonParser.ParseString(json, ref index);
                            global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                            int key0 = int.Parse(keyStr0);
                            global::System.Collections.Generic.IEnumerable<int> val0 = default;
                            {
                                var list1 = new global::System.Collections.Generic.List<int>();
                                global::GenJson.GenJsonParser.Expect(json, ref index, '[');
                                while (index < json.Length)
                                {
                                    global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                                    if (json[index] == ']')
                                    {
                                        index++;
                                        val0 = list1;
                                        break;
                                    }
                                    int item1 = default;
                                    item1 = global::GenJson.GenJsonParser.ParseInt(json, ref index);
                                    list1.Add(item1);
                                    global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                                    if (json[index] == ',')
                                    {
                                        index++;
                                    }
                                }
                            }
                            dict0.Add(key0, val0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "PresentDictionaryIntEmptyClasses"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var dict0 = new global::System.Collections.Generic.Dictionary<int, global::GenJson.Tests.EmptyClass>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '{');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == '}')
                            {
                                index++;
                                _PresentDictionaryIntEmptyClasses = dict0;
                                break;
                            }
                            var keyStr0 = global::GenJson.GenJsonParser.ParseString(json, ref index);
                            global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                            int key0 = int.Parse(keyStr0);
                            global::GenJson.Tests.EmptyClass val0 = default;
                            val0 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                            dict0.Add(key0, val0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "NullableDictionaryIntIntNull"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var dict0 = new global::System.Collections.Generic.Dictionary<int, int>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '{');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == '}')
                            {
                                index++;
                                _NullableDictionaryIntIntNull = dict0;
                                break;
                            }
                            var keyStr0 = global::GenJson.GenJsonParser.ParseString(json, ref index);
                            global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                            int key0 = int.Parse(keyStr0);
                            int val0 = default;
                            val0 = global::GenJson.GenJsonParser.ParseInt(json, ref index);
                            dict0.Add(key0, val0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                if (!matched)
                {
                    global::GenJson.GenJsonParser.SkipString(json, ref index);
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    global::GenJson.GenJsonParser.SkipValue(json, ref index);
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == ',')
                {
                    index++;
                }
            }
            throw new System.Exception("Unterminated object at " + index);
        }
    }
}

  
namespace GenJson.Tests
{
    partial class NestedDictionaryClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 10;
            {
                size += 2;
                int count0 = 0;
                foreach (var kvp0 in this.Present)
                {
                    count0++;
                    size += 3;
                    size += global::GenJson.GenJsonSizeHelper.GetSize(kvp0.Key);
                    {
                        size += 2;
                        int count1 = 0;
                        foreach (var kvp1 in kvp0.Value)
                        {
                            count1++;
                            size += 3;
                            size += global::GenJson.GenJsonSizeHelper.GetSize(kvp1.Key);
                            size += kvp1.Value.CalculateJsonSize();
                        }
                        if (count1 > 1) size += count1 - 1;
                    }
                }
                if (count0 > 1) size += count0 - 1;
            }
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Present");
            span[index++] = ':';
            {
                span[index++] = '{';
                bool firstItem0 = true;
                foreach (var kvp0 in this.Present)
                {
                    if (!firstItem0)
                    {
                        span[index++] = ',';
                    }
                    firstItem0 = false;
                    global::GenJson.GenJsonWriter.WriteString(span, ref index, kvp0.Key.ToString());
                    span[index++] = ':';
                    {
                        span[index++] = '{';
                        bool firstItem1 = true;
                        foreach (var kvp1 in kvp0.Value)
                        {
                            if (!firstItem1)
                            {
                                span[index++] = ',';
                            }
                            firstItem1 = false;
                            global::GenJson.GenJsonWriter.WriteString(span, ref index, kvp1.Key.ToString());
                            span[index++] = ':';
                            kvp1.Value.WriteJson(span, ref index);
                        }
                        span[index++] = '}';
                    }
                }
                span[index++] = '}';
            }
            span[index++] = '}';
        }

        public static NestedDictionaryClass FromJson(string json)
        {
            if (json is null) throw new System.ArgumentNullException(nameof(json));
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            var result = Parse(span, ref index);
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            if (index != span.Length) throw new System.ArgumentException("Unexpected extra characters", nameof(json));
            return result;
        }

        internal static NestedDictionaryClass Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.Expect(json, ref index, '{');
            global::System.Collections.Generic.IReadOnlyDictionary<int, global::System.Collections.Generic.IReadOnlyDictionary<int, global::GenJson.Tests.EmptyClass>> _Present = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == '}')
                {
                    index++;
                    return new NestedDictionaryClass
                    {
                        Present = _Present,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Present"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    {
                        var dict0 = new global::System.Collections.Generic.Dictionary<int, global::System.Collections.Generic.IReadOnlyDictionary<int, global::GenJson.Tests.EmptyClass>>();
                        global::GenJson.GenJsonParser.Expect(json, ref index, '{');
                        while (index < json.Length)
                        {
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == '}')
                            {
                                index++;
                                _Present = dict0;
                                break;
                            }
                            var keyStr0 = global::GenJson.GenJsonParser.ParseString(json, ref index);
                            global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                            int key0 = int.Parse(keyStr0);
                            global::System.Collections.Generic.IReadOnlyDictionary<int, global::GenJson.Tests.EmptyClass> val0 = default;
                            {
                                var dict1 = new global::System.Collections.Generic.Dictionary<int, global::GenJson.Tests.EmptyClass>();
                                global::GenJson.GenJsonParser.Expect(json, ref index, '{');
                                while (index < json.Length)
                                {
                                    global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                                    if (json[index] == '}')
                                    {
                                        index++;
                                        val0 = dict1;
                                        break;
                                    }
                                    var keyStr1 = global::GenJson.GenJsonParser.ParseString(json, ref index);
                                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                                    int key1 = int.Parse(keyStr1);
                                    global::GenJson.Tests.EmptyClass val1 = default;
                                    val1 = global::GenJson.Tests.EmptyClass.Parse(json, ref index);
                                    dict1.Add(key1, val1);
                                    global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                                    if (json[index] == ',')
                                    {
                                        index++;
                                    }
                                }
                            }
                            dict0.Add(key0, val0);
                            global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                            if (json[index] == ',')
                            {
                                index++;
                            }
                        }
                    }
                    matched = true;
                }
                if (!matched)
                {
                    global::GenJson.GenJsonParser.SkipString(json, ref index);
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    global::GenJson.GenJsonParser.SkipValue(json, ref index);
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == ',')
                {
                    index++;
                }
            }
            throw new System.Exception("Unterminated object at " + index);
        }
    }
}

  
namespace GenJson.Tests
{
    partial class PrimitiveClass
    {
        public int CalculateJsonSize()
        {
            int size = 2;
            int propertyCount = 0;
            propertyCount++;
            size += 7;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Bool);
            propertyCount++;
            size += 6;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Int);
            propertyCount++;
            size += 7;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Uint);
            propertyCount++;
            size += 7;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Char);
            propertyCount++;
            size += 7;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Long);
            propertyCount++;
            size += 8;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Short);
            propertyCount++;
            size += 7;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Byte);
            propertyCount++;
            size += 8;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.SByte);
            propertyCount++;
            size += 8;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Float);
            propertyCount++;
            size += 9;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Double);
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Decimal);
            propertyCount++;
            size += 9;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.String);
            propertyCount++;
            size += 11;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.DateTime);
            propertyCount++;
            size += 11;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.TimeSpan);
            propertyCount++;
            size += 11;
            {
                global::System.Span<char> buffer = stackalloc char[128];
                if (this.DateOnly.TryFormat(buffer, out int written, "O", global::System.Globalization.CultureInfo.InvariantCulture))
                {
                    size += written + 2;
                }
                else
                {
                    size += this.DateOnly.ToString("O", global::System.Globalization.CultureInfo.InvariantCulture).Length + 2;
                }
            }
            propertyCount++;
            size += 11;
            {
                global::System.Span<char> buffer = stackalloc char[128];
                if (this.TimeOnly.TryFormat(buffer, out int written, "O", global::System.Globalization.CultureInfo.InvariantCulture))
                {
                    size += written + 2;
                }
                else
                {
                    size += this.TimeOnly.ToString("O", global::System.Globalization.CultureInfo.InvariantCulture).Length + 2;
                }
            }
            propertyCount++;
            size += 17;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.DateTimeOffset);
            propertyCount++;
            size += 7;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Guid);
            propertyCount++;
            size += 10;
            size += global::GenJson.GenJsonSizeHelper.GetSize(this.Version);
            if (propertyCount > 0) size += propertyCount - 1;
            return size;
        }

        public string ToJson()
        {
            return string.Create(CalculateJsonSize(), this, (span, state) =>
            {
                int index = 0;
                state.WriteJson(span, ref index);
            });
        }

        public void WriteJson(System.Span<char> span, ref int index)
        {
            span[index++] = '{';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Bool");
            span[index++] = ':';
            if (this.Bool) { span[index++] = 't'; span[index++] = 'r'; span[index++] = 'u'; span[index++] = 'e'; }
            else { span[index++] = 'f'; span[index++] = 'a'; span[index++] = 'l'; span[index++] = 's'; span[index++] = 'e'; }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Int");
            span[index++] = ':';
            { if (!this.Int.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
            { throw new System.Exception("Buffer too small (Primitive)"); }
            index += written;
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Uint");
            span[index++] = ':';
            { if (!this.Uint.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
            { throw new System.Exception("Buffer too small (Primitive)"); }
            index += written;
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Char");
            span[index++] = ':';
            span[index++] = '"';
            span[index++] = this.Char;
            span[index++] = '"';
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Long");
            span[index++] = ':';
            { if (!this.Long.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
            { throw new System.Exception("Buffer too small (Primitive)"); }
            index += written;
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Short");
            span[index++] = ':';
            { if (!this.Short.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
            { throw new System.Exception("Buffer too small (Primitive)"); }
            index += written;
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Byte");
            span[index++] = ':';
            { if (!this.Byte.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
            { throw new System.Exception("Buffer too small (Primitive)"); }
            index += written;
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "SByte");
            span[index++] = ':';
            { if (!this.SByte.TryFormat(span.Slice(index), out int written, default, System.Globalization.CultureInfo.InvariantCulture))
            { throw new System.Exception("Buffer too small (Primitive)"); }
            index += written;
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Float");
            span[index++] = ':';
            {
                if (!this.Float.TryFormat(span.Slice(index), out int written, "R", System.Globalization.CultureInfo.InvariantCulture))                { throw new System.Exception("Buffer too small (FloatingPoint)"); }
                index += written;
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Double");
            span[index++] = ':';
            {
                if (!this.Double.TryFormat(span.Slice(index), out int written, "R", System.Globalization.CultureInfo.InvariantCulture))                { throw new System.Exception("Buffer too small (FloatingPoint)"); }
                index += written;
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Decimal");
            span[index++] = ':';
            {
                if (!this.Decimal.TryFormat(span.Slice(index), out int written, "R", System.Globalization.CultureInfo.InvariantCulture))                { throw new System.Exception("Buffer too small (FloatingPoint)"); }
                index += written;
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "String");
            span[index++] = ':';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, this.String);
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "DateTime");
            span[index++] = ':';
            {
                span[index++] = '"';
                if (!this.DateTime.TryFormat(span.Slice(index), out int written, "O", System.Globalization.CultureInfo.InvariantCulture))                { throw new System.Exception("Buffer too small (Formatted)"); }
                index += written;
                span[index++] = '"';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "TimeSpan");
            span[index++] = ':';
            {
                span[index++] = '"';
                if (!this.TimeSpan.TryFormat(span.Slice(index), out int written, "c", System.Globalization.CultureInfo.InvariantCulture))                { throw new System.Exception("Buffer too small (Formatted)"); }
                index += written;
                span[index++] = '"';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "DateOnly");
            span[index++] = ':';
            {
                span[index++] = '"';
                if (!this.DateOnly.TryFormat(span.Slice(index), out int written, "O", System.Globalization.CultureInfo.InvariantCulture))                { throw new System.Exception("Buffer too small (Formatted)"); }
                index += written;
                span[index++] = '"';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "TimeOnly");
            span[index++] = ':';
            {
                span[index++] = '"';
                if (!this.TimeOnly.TryFormat(span.Slice(index), out int written, "O", System.Globalization.CultureInfo.InvariantCulture))                { throw new System.Exception("Buffer too small (Formatted)"); }
                index += written;
                span[index++] = '"';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "DateTimeOffset");
            span[index++] = ':';
            {
                span[index++] = '"';
                if (!this.DateTimeOffset.TryFormat(span.Slice(index), out int written, "O", System.Globalization.CultureInfo.InvariantCulture))                { throw new System.Exception("Buffer too small (Formatted)"); }
                index += written;
                span[index++] = '"';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Guid");
            span[index++] = ':';
            {
                span[index++] = '"';
                if (!this.Guid.TryFormat(span.Slice(index), out int written))                { throw new System.Exception("Buffer too small (Formatted)"); }
                index += written;
                span[index++] = '"';
            }
            span[index++] = ',';
            global::GenJson.GenJsonWriter.WriteString(span, ref index, "Version");
            span[index++] = ':';
            {
                span[index++] = '"';
                if (!this.Version.TryFormat(span.Slice(index), out int written))                { throw new System.Exception("Buffer too small (Formatted)"); }
                index += written;
                span[index++] = '"';
            }
            span[index++] = '}';
        }

        public static PrimitiveClass FromJson(string json)
        {
            if (json is null) throw new System.ArgumentNullException(nameof(json));
            System.ReadOnlySpan<char> span = json;
            var index = 0;
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            var result = Parse(span, ref index);
            global::GenJson.GenJsonParser.SkipWhitespace(span, ref index);
            if (index != span.Length) throw new System.ArgumentException("Unexpected extra characters", nameof(json));
            return result;
        }

        internal static PrimitiveClass Parse(System.ReadOnlySpan<char> json, ref int index)
        {
            global::GenJson.GenJsonParser.Expect(json, ref index, '{');
            bool _Bool = default;
            int _Int = default;
            uint _Uint = default;
            char _Char = default;
            long _Long = default;
            short _Short = default;
            byte _Byte = default;
            sbyte _SByte = default;
            float _Float = default;
            double _Double = default;
            decimal _Decimal = default;
            string _String = default;
            global::System.DateTime _DateTime = default;
            global::System.TimeSpan _TimeSpan = default;
            global::System.DateOnly _DateOnly = default;
            global::System.TimeOnly _TimeOnly = default;
            global::System.DateTimeOffset _DateTimeOffset = default;
            global::System.Guid _Guid = default;
            global::System.Version _Version = default;
            while (index < json.Length)
            {
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == '}')
                {
                    index++;
                    return new PrimitiveClass
                    {
                        Bool = _Bool,
                        Int = _Int,
                        Uint = _Uint,
                        Char = _Char,
                        Long = _Long,
                        Short = _Short,
                        Byte = _Byte,
                        SByte = _SByte,
                        Float = _Float,
                        Double = _Double,
                        Decimal = _Decimal,
                        String = _String,
                        DateTime = _DateTime,
                        TimeSpan = _TimeSpan,
                        DateOnly = _DateOnly,
                        TimeOnly = _TimeOnly,
                        DateTimeOffset = _DateTimeOffset,
                        Guid = _Guid,
                        Version = _Version,
                    };
                }
                bool matched = false;
                if (false) { }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Bool"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _Bool = global::GenJson.GenJsonParser.ParseBoolean(json, ref index);
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Int"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _Int = global::GenJson.GenJsonParser.ParseInt(json, ref index);
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Uint"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _Uint = global::GenJson.GenJsonParser.ParseUInt(json, ref index);
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Char"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _Char = global::GenJson.GenJsonParser.ParseChar(json, ref index);
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Long"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _Long = global::GenJson.GenJsonParser.ParseLong(json, ref index);
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Short"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _Short = global::GenJson.GenJsonParser.ParseShort(json, ref index);
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Byte"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _Byte = global::GenJson.GenJsonParser.ParseByte(json, ref index);
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "SByte"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _SByte = global::GenJson.GenJsonParser.ParseSByte(json, ref index);
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Float"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _Float = global::GenJson.GenJsonParser.ParseFloat(json, ref index);
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Double"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _Double = global::GenJson.GenJsonParser.ParseDouble(json, ref index);
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Decimal"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _Decimal = global::GenJson.GenJsonParser.ParseDecimal(json, ref index);
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "String"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _String = global::GenJson.GenJsonParser.ParseString(json, ref index);
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "DateTime"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _DateTime = System.DateTime.Parse(global::GenJson.GenJsonParser.ParseString(json, ref index), System.Globalization.CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.RoundtripKind);
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "TimeSpan"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _TimeSpan = System.TimeSpan.Parse(global::GenJson.GenJsonParser.ParseString(json, ref index));
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "DateOnly"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _DateOnly = System.DateOnly.Parse(global::GenJson.GenJsonParser.ParseString(json, ref index));
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "TimeOnly"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _TimeOnly = System.TimeOnly.Parse(global::GenJson.GenJsonParser.ParseString(json, ref index));
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "DateTimeOffset"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _DateTimeOffset = System.DateTimeOffset.Parse(global::GenJson.GenJsonParser.ParseString(json, ref index), System.Globalization.CultureInfo.InvariantCulture);
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Guid"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _Guid = System.Guid.Parse(global::GenJson.GenJsonParser.ParseString(json, ref index));
                    matched = true;
                }
                else if (global::GenJson.GenJsonParser.MatchesKey(json, ref index, "Version"))
                {
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    _Version = System.Version.Parse(global::GenJson.GenJsonParser.ParseString(json, ref index));
                    matched = true;
                }
                if (!matched)
                {
                    global::GenJson.GenJsonParser.SkipString(json, ref index);
                    global::GenJson.GenJsonParser.Expect(json, ref index, ':');
                    global::GenJson.GenJsonParser.SkipValue(json, ref index);
                }
                global::GenJson.GenJsonParser.SkipWhitespace(json, ref index);
                if (json[index] == ',')
                {
                    index++;
                }
            }
            throw new System.Exception("Unterminated object at " + index);
        }
    }
}

]